<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <title>Execution Trace Diff</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <style>
* {
  box-sizing: border-box;
}

/* Create two equal columns that floats next to each other */
.column {
  float: left;
  width: 50%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

.test {
    border: 1px solid darkblue;
    padding-left: 10px;
}
</style> 
 </head> 
 <body> 
  <div class="row test"> 
   <h2>Differencing Test:</h2> <code> <pre>@Test <br>
public void test_main(){ <br>
    String ret = NumberAnalyzer.analyze(1); <br>
    assertThat(ret, containsString("greater")); <br>
}
        </pre> </code> 
  </div> 
  <div class="row"> 
   <div class="column"> 
    <h2>Original Code:</h2> <code> <pre id="original-trace">           1:  <span style="background-color: white">      package com.openhtmltopdf.performance;</span><br>           2:  <span style="background-color: white">      </span><br>           3:  <span style="background-color: white">      import java.util.stream.Collectors;</span><br>           4:  <span style="background-color: white">      import java.util.stream.IntStream;</span><br>           5:  <span style="background-color: white">      </span><br>           6:  <span style="background-color: white">      public class PerformanceCaseGenerator {</span><br>           7:  <span style="background-color: white">          private static final String LOREM = </span><br>           8:  <span style="background-color: white">                  "Lorem ipsum dolor sit amet, consectetur adipiscing elit. " +</span><br>           9:  <span style="background-color: white">                  "Etiam vulputate, nibh eget convallis vestibulum, ex ipsum ullamcorper ligula, " +</span><br>          10:  <span style="background-color: white">                  "eget bibendum nulla massa vel metus. Duis sed nunc ornare, convallis purus at, " +</span><br>          11:  <span style="background-color: white">                  "fringilla ipsum. Quisque ullamcorper hendrerit ipsum at eleifend. Orci varius " +</span><br>          12:  <span style="background-color: white">                  "natoque penatibus et magnis dis parturient montes, nascetur ridiculus.";</span><br>          13:  <span style="background-color: white">          </span><br>          14:  <span style="background-color: white">          </span><br>          15:  <span style="background-color: white">   0      public static String paragraphs(int howMany) {</span><br>          16:  <span style="background-color: white">   0          final String hdr = "<style>p { font-family: sans-serif; }</style>";</span><br>          17:  <span style="background-color: white">   0          final String paragraph = "<p>" + LOREM + "</p>";</span><br>          18:  <span style="background-color: white">   0          final String ftr = "";</span><br>          19:  <span style="background-color: white">                     </span><br>          20:  <span style="background-color: yellow">   0          return IntStream.range(0, howMany)</span><br>          21:  <span style="background-color: yellow">                              .mapToObj(i -&gt; paragraph)</span><br>          22:  <span style="background-color: yellow">                              .collect(Collectors.joining("\n", hdr, ftr));</span><br>          23:  <span style="background-color: white">          }</span><br>          24:  <span style="background-color: white">          </span><br>          25:  <span style="background-color: yellow">   0      public static String tableRows(int howMany) {</span><br>          26:  <span style="background-color: yellow">   0          final String hdr = "<style>tr:nth-child(odd) > td { background-color: orange; } table { border-collapse: collapse; }" +</span></style></span><br>          27:  <span style="background-color: yellow">                                 "
       <table>
        ";
       </table></span><br>          28:  <span style="background-color: yellow">   0          final String tr = "OneTwoThree";</span><br>          29:  <span style="background-color: yellow">   0          final String ftr = "";</span><br>          30:  <span style="background-color: yellow">                     </span><br>          31:  <span style="background-color: yellow">   0          return IntStream.range(0, howMany)</span><br>          32:  <span style="background-color: yellow">                              .mapToObj(i -&gt; tr)</span><br>          33:  <span style="background-color: yellow">                              .collect(Collectors.joining("\n", hdr, ftr));</span><br>          34:  <span style="background-color: yellow">          }</span><br>          35:  <span style="background-color: white">          </span><br>          36:  <span style="background-color: white">          /**</span><br>          37:  <span style="background-color: white">           * Performace case for:</span><br>          38:  <span style="background-color: white">           *   Issue 396 - CSS border-radius makes pdf rendering very slow.</span><br>          39:  <span style="background-color: white">           * Caused by Area constructor being very slow (according to VisualVM). </span><br>          40:  <span style="background-color: white">           *</span><br>          41:  <span style="background-color: white">           */</span><br>          42:  <span style="background-color: white">   0      public static String borderRadius(int howMany) {</span><br>          43:  <span style="background-color: white">   0          final String hdr = "<style>div.avatar { margin-left: auto; margin-right: auto; height: 200px; width: 160px; " +</span></style></span><br>          44:  <span style="background-color: white">                                 "background-size: cover; background-position: center center; background-repeat: no-repeat; " +</span><br>          45:  <span style="background-color: white">                                 "border-radius: 4px;" + </span><br>          46:  <span style="background-color: white">                                 "background-image: url(demos/images/flyingsaucer.png); }" +</span><br>          47:  <span style="background-color: white">                                 "";</span><br>          48:  <span style="background-color: white">   0          final String div = "
       <div class="\&quot;avatar\&quot;"></div>";</span><br>          49:  <span style="background-color: white">   0          final String ftr = "";</span><br>          50:  <span style="background-color: white">          </span><br>          51:  <span style="background-color: yellow">   0          return IntStream.range(0, howMany)</span><br>          52:  <span style="background-color: yellow">                      .mapToObj(i -&gt; div)</span><br>          53:  <span style="background-color: yellow">                      .collect(Collectors.joining("\n", hdr, ftr));</span><br>          54:  <span style="background-color: white">          }</span><br>          55:  <span style="background-color: white">      </span><br>          56:  <span style="background-color: white">      }</span><br></pre> </code> 
   </div> 
   <div class="column"> 
    <h2>Patched Code:</h2> <code> <pre id="patched-trace">        1-&gt;N:  <span style="background-color: white">      package com.openhtmltopdf.performance;</span><br>        2-&gt;N:  <span style="background-color: white">      </span><br>        3-&gt;N:  <span style="background-color: white">      import java.util.stream.Collectors;</span><br>        4-&gt;N:  <span style="background-color: white">      import java.util.stream.IntStream;</span><br>        5-&gt;N:  <span style="background-color: white">      </span><br>        6-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.layout.BlockBoxing;</span><br>        7-&gt;N:  <span style="background-color: white">      </span><br>        8-&gt;N:  <span style="background-color: white">      public class PerformanceCaseGenerator {</span><br>        9-&gt;7:  <span style="background-color: white">          private static final String LOREM = </span><br>       10-&gt;8:  <span style="background-color: white">                  "Lorem ipsum dolor sit amet, consectetur adipiscing elit. " +</span><br>       11-&gt;9:  <span style="background-color: white">                  "Etiam vulputate, nibh eget convallis vestibulum, ex ipsum ullamcorper ligula, " +</span><br>      12-&gt;10:  <span style="background-color: white">                  "eget bibendum nulla massa vel metus. Duis sed nunc ornare, convallis purus at, " +</span><br>      13-&gt;11:  <span style="background-color: white">                  "fringilla ipsum. Quisque ullamcorper hendrerit ipsum at eleifend. Orci varius " +</span><br>      14-&gt;12:  <span style="background-color: white">                  "natoque penatibus et magnis dis parturient montes, nascetur ridiculus.";</span><br>       15-&gt;N:  <span style="background-color: white">      </span><br>       16-&gt;U:  <span style="background-color: yellow">   0      private static String join(String hdr, String repeat, String ftr, int howMany) {</span><br>       17-&gt;U:  <span style="background-color: yellow">   0          return IntStream.range(0, howMany)</span><br>       18-&gt;U:  <span style="background-color: yellow">                      .mapToObj(i -&gt; repeat)</span><br>       19-&gt;U:  <span style="background-color: yellow">                      .collect(Collectors.joining("\n", hdr, ftr));</span><br>       20-&gt;U:  <span style="background-color: yellow">          }</span><br>       21-&gt;N:  <span style="background-color: white">      </span><br>      22-&gt;15:  <span style="background-color: white">   0      public static String paragraphs(int howMany) {</span><br>      23-&gt;16:  <span style="background-color: white">   0          final String hdr = "<style>p { font-family: sans-serif; }</style>";</span><br>      24-&gt;17:  <span style="background-color: white">   0          final String paragraph = "<p>" + LOREM + "</p>";</span><br>      25-&gt;18:  <span style="background-color: white">   0          final String ftr = "";</span><br>       26-&gt;N:  <span style="background-color: white">      </span><br>       27-&gt;U:  <span style="background-color: yellow">   0          return join(hdr, paragraph, ftr, howMany);</span><br>       28-&gt;N:  <span style="background-color: white">          }</span><br>       29-&gt;N:  <span style="background-color: white">      </span><br>       30-&gt;U:  <span style="background-color: yellow">   0      public static String tableRows(int howMany) {</span><br>       31-&gt;U:  <span style="background-color: yellow">   0          final String hdr = "<style>tr:nth-child(odd) > td { background-color: orange; } table { border-collapse: collapse; }" +</span></style></span><br>       32-&gt;U:  <span style="background-color: yellow">                                 "
       <table>
        ";
       </table></span><br>       33-&gt;U:  <span style="background-color: yellow">   0          final String tr = "OneTwoThree";</span><br>       34-&gt;U:  <span style="background-color: yellow">   0          final String ftr = "";</span><br>       35-&gt;U:  <span style="background-color: yellow">      </span><br>       36-&gt;U:  <span style="background-color: yellow">   0          return join(hdr, tr, ftr, howMany);</span><br>       37-&gt;U:  <span style="background-color: yellow">          }</span><br>       38-&gt;N:  <span style="background-color: white">      </span><br>       39-&gt;N:  <span style="background-color: white">          /**</span><br>       40-&gt;N:  <span style="background-color: white">           * Performance of {@link BlockBoxing}</span><br>       41-&gt;N:  <span style="background-color: white">           */</span><br>       42-&gt;U:  <span style="background-color: yellow">   0      public static String pageBreakAvoidBlocks(int howMany) {</span><br>       43-&gt;U:  <span style="background-color: yellow">   0          final String hdr = "<style>" +</span></style></span><br>       44-&gt;U:  <span style="background-color: yellow">                      "div { page-break-before: avoid; page-break-after: avoid; page-break-inside: avoid; height: 40px; }" +</span><br>       45-&gt;U:  <span style="background-color: yellow">                      "div:nth-child(10) { page-break-before: auto; }" +</span><br>       46-&gt;U:  <span style="background-color: yellow">                      "";</span><br>       47-&gt;U:  <span style="background-color: yellow">   0          final String block = "
       <div></div>";</span><br>       48-&gt;U:  <span style="background-color: yellow">   0          final String ftr = "";</span><br>       49-&gt;U:  <span style="background-color: yellow">      </span><br>       50-&gt;U:  <span style="background-color: yellow">   0          return join(hdr, block, ftr, howMany);</span><br>       51-&gt;U:  <span style="background-color: yellow">          }</span><br>       52-&gt;N:  <span style="background-color: white">      </span><br>       53-&gt;N:  <span style="background-color: white">          /**</span><br>       54-&gt;N:  <span style="background-color: white">           * Performance of {@link BlockBoxing}</span><br>       55-&gt;N:  <span style="background-color: white">           */</span><br>       56-&gt;U:  <span style="background-color: yellow">   0      public static String blocks(int howMany) {</span><br>       57-&gt;U:  <span style="background-color: yellow">   0          final String hdr = "<style>" +</span></style></span><br>       58-&gt;U:  <span style="background-color: yellow">                      "div { height: 40px; }" +</span><br>       59-&gt;U:  <span style="background-color: yellow">                      "";</span><br>       60-&gt;U:  <span style="background-color: yellow">   0          final String block = "
       <div></div>";</span><br>       61-&gt;U:  <span style="background-color: yellow">   0          final String ftr = "";</span><br>       62-&gt;U:  <span style="background-color: yellow">      </span><br>       63-&gt;U:  <span style="background-color: yellow">   0          return join(hdr, block, ftr, howMany);</span><br>       64-&gt;U:  <span style="background-color: yellow">          }</span><br>       65-&gt;N:  <span style="background-color: white">      </span><br>       66-&gt;N:  <span style="background-color: white">          /**</span><br>       67-&gt;N:  <span style="background-color: white">           * Performace case for:</span><br>       68-&gt;N:  <span style="background-color: white">           *   Issue 396 - CSS border-radius makes pdf rendering very slow.</span><br>       69-&gt;N:  <span style="background-color: white">           * Caused by Area constructor being very slow (according to VisualVM). </span><br>       70-&gt;N:  <span style="background-color: white">           *</span><br>       71-&gt;N:  <span style="background-color: white">           */</span><br>      72-&gt;42:  <span style="background-color: white">   0      public static String borderRadius(int howMany) {</span><br>      73-&gt;43:  <span style="background-color: white">   0          final String hdr = "<style>div.avatar { margin-left: auto; margin-right: auto; height: 200px; width: 160px; " +</span></style></span><br>      74-&gt;44:  <span style="background-color: white">                                 "background-size: cover; background-position: center center; background-repeat: no-repeat; " +</span><br>      75-&gt;45:  <span style="background-color: white">                                 "border-radius: 4px;" + </span><br>      76-&gt;46:  <span style="background-color: white">                                 "background-image: url(demos/images/flyingsaucer.png); }" +</span><br>      77-&gt;47:  <span style="background-color: white">                                 "";</span><br>      78-&gt;48:  <span style="background-color: white">   0          final String div = "
       <div class="\&quot;avatar\&quot;"></div>";</span><br>      79-&gt;49:  <span style="background-color: white">   0          final String ftr = "";</span><br>       80-&gt;N:  <span style="background-color: white">      </span><br>       81-&gt;U:  <span style="background-color: yellow">   0          return join(hdr, div, ftr, howMany);</span><br>       82-&gt;N:  <span style="background-color: white">          }</span><br>       83-&gt;N:  <span style="background-color: white">      </span><br>       84-&gt;N:  <span style="background-color: white">      }</span><br></pre> </code> 
   </div> 
  </div>  
 </body>
</html>