<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <title>Execution Trace Diff</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <style>
* {
  box-sizing: border-box;
}

/* Create two equal columns that floats next to each other */
.column {
  float: left;
  width: 50%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

.test {
    border: 1px solid darkblue;
    padding-left: 10px;
}
</style> 
 </head> 
 <body> 
  <div class="row test"> 
   <h2>Differencing Test:</h2> <code> <pre>@Test <br>
public void test_main(){ <br>
    String ret = NumberAnalyzer.analyze(1); <br>
    assertThat(ret, containsString("greater")); <br>
}
        </pre> </code> 
  </div> 
  <div class="row"> 
   <div class="column"> 
    <h2>Original Code:</h2> <code> <pre id="original-trace">           1:  <span style="background-color: white">      /*</span><br>           2:  <span style="background-color: white">       * CascadedStyle.java</span><br>           3:  <span style="background-color: white">       * Copyright (c) 2004, 2005 Patrick Wright, Torbjoern Gannholm</span><br>           4:  <span style="background-color: white">       *</span><br>           5:  <span style="background-color: white">       * This program is free software; you can redistribute it and/or</span><br>           6:  <span style="background-color: white">       * modify it under the terms of the GNU Lesser General Public License</span><br>           7:  <span style="background-color: white">       * as published by the Free Software Foundation; either version 2.1</span><br>           8:  <span style="background-color: white">       * of the License, or (at your option) any later version.</span><br>           9:  <span style="background-color: white">       *</span><br>          10:  <span style="background-color: white">       * This program is distributed in the hope that it will be useful,</span><br>          11:  <span style="background-color: white">       * but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br>          12:  <span style="background-color: white">       * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span><br>          13:  <span style="background-color: white">       * GNU Lesser General Public License for more details.</span><br>          14:  <span style="background-color: white">       *</span><br>          15:  <span style="background-color: white">       * You should have received a copy of the GNU Lesser General Public License</span><br>          16:  <span style="background-color: white">       * along with this program; if not, write to the Free Software</span><br>          17:  <span style="background-color: white">       * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span><br>          18:  <span style="background-color: white">       *</span><br>          19:  <span style="background-color: white">       */</span><br>          20:  <span style="background-color: white">      package com.openhtmltopdf.css.newmatch;</span><br>          21:  <span style="background-color: white">      </span><br>          22:  <span style="background-color: white">      import java.util.ArrayList;</span><br>          23:  <span style="background-color: white">      import java.util.Arrays;</span><br>          24:  <span style="background-color: white">      import java.util.Collections;</span><br>          25:  <span style="background-color: white">      import java.util.Iterator;</span><br>          26:  <span style="background-color: white">      import java.util.List;</span><br>          27:  <span style="background-color: white">      import java.util.Map;</span><br>          28:  <span style="background-color: white">      import java.util.TreeMap;</span><br>          29:  <span style="background-color: white">      </span><br>          30:  <span style="background-color: white">      import com.openhtmltopdf.css.constants.CSSName;</span><br>          31:  <span style="background-color: white">      import com.openhtmltopdf.css.constants.IdentValue;</span><br>          32:  <span style="background-color: white">      import com.openhtmltopdf.css.parser.CSSPrimitiveValue;</span><br>          33:  <span style="background-color: white">      import com.openhtmltopdf.css.parser.PropertyValue;</span><br>          34:  <span style="background-color: white">      import com.openhtmltopdf.css.sheet.PropertyDeclaration;</span><br>          35:  <span style="background-color: white">      import com.openhtmltopdf.css.sheet.StylesheetInfo;</span><br>          36:  <span style="background-color: white">      </span><br>          37:  <span style="background-color: white">      </span><br>          38:  <span style="background-color: white">      /**</span><br>          39:  <span style="background-color: white">       * Holds a set of {@link com.openhtmltopdf.css.sheet.PropertyDeclaration}s for</span><br>          40:  <span style="background-color: white">       * each unique CSS property name. What properties belong in the set is not</span><br>          41:  <span style="background-color: white">       * determined, except that multiple entries are resolved into a single set using</span><br>          42:  <span style="background-color: white">       * cascading rules. The set is cascaded during instantiation, so once you have a</span><br>          43:  <span style="background-color: white">       * CascadedStyle, the PropertyDeclarations you retrieve from it will have been</span><br>          44:  <span style="background-color: white">       * resolved following the CSS cascading rules. Note that this class knows</span><br>          45:  <span style="background-color: white">       * nothing about CSS selector-matching rules. Before creating a CascadedStyle,</span><br>          46:  <span style="background-color: white">       * you will need to determine which PropertyDeclarations belong in the set--for</span><br>          47:  <span style="background-color: white">       * example, by matching {@link com.openhtmltopdf.css.sheet.Ruleset}s to {@link</span><br>          48:  <span style="background-color: white">       * org.w3c.dom.Document} {@link org.w3c.dom.Element}s via their selectors. You</span><br>          49:  <span style="background-color: white">       * can get individual properties by using {@link #propertyByName(CSSName)} or an</span><br>          50:  <span style="background-color: white">       * {@link java.util.Iterator} of properties with {@link</span><br>          51:  <span style="background-color: white">       * #getCascadedPropertyDeclarations()}. Check for individual property assignments</span><br>          52:  <span style="background-color: white">       * using {@link #hasProperty(CSSName)}. A CascadedStyle is immutable, as</span><br>          53:  <span style="background-color: white">       * properties can not be added or removed from it once instantiated.</span><br>          54:  <span style="background-color: white">       *</span><br>          55:  <span style="background-color: white">       * @author Torbjoern Gannholm</span><br>          56:  <span style="background-color: white">       * @author Patrick Wright</span><br>          57:  <span style="background-color: white">       */</span><br>          58:  <span style="background-color: white">      public class CascadedStyle {</span><br>          59:  <span style="background-color: white">          /**</span><br>          60:  <span style="background-color: white">           * Map of PropertyDeclarations, keyed by {@link CSSName}</span><br>          61:  <span style="background-color: white">           */</span><br>          62:  <span style="background-color: white">      	private Map
       <cssname, propertydeclaration>
         cascadedProperties;
       </cssname,></span><br>          63:  <span style="background-color: white">          </span><br>          64:  <span style="background-color: white">          private String fingerprint;</span><br>          65:  <span style="background-color: white">          </span><br>          66:  <span style="background-color: white">          /**</span><br>          67:  <span style="background-color: white">           * Constructs a new CascadedStyle, given an {@link java.util.Iterator} of</span><br>          68:  <span style="background-color: white">           * {@link com.openhtmltopdf.css.sheet.PropertyDeclaration}s already sorted</span><br>          69:  <span style="background-color: white">           * by specificity of the CSS selector they came from. The Iterator can have</span><br>          70:  <span style="background-color: white">           * multiple PropertyDeclarations with the same name; the property cascade</span><br>          71:  <span style="background-color: white">           * will be resolved during instantiation, resulting in a set of</span><br>          72:  <span style="background-color: white">           * PropertyDeclarations. Once instantiated, properties may be retrieved</span><br>          73:  <span style="background-color: white">           * using the normal API for the class.</span><br>          74:  <span style="background-color: white">           *</span><br>          75:  <span style="background-color: white">           * @param iter An Iterator containing PropertyDeclarations in order of</span><br>          76:  <span style="background-color: white">           *             specificity.</span><br>          77:  <span style="background-color: white">           */</span><br>          78:  <span style="background-color: red"> 99+      CascadedStyle(java.util.Iterator
       <propertydeclaration>
         iter) {
       </propertydeclaration></span><br>          79:  <span style="background-color: red"> 99+          this();</span><br>          80:  <span style="background-color: white">      </span><br>          81:  <span style="background-color: red"> 99+          addProperties(iter);</span><br>          82:  <span style="background-color: white">          }</span><br>          83:  <span style="background-color: white">          </span><br>          84:  <span style="background-color: white">          /**</span><br>          85:  <span style="background-color: white">           * Creates a <code>CascadedStyle</code> using the provided property</span><br>          86:  <span style="background-color: white">           * declarations.  It is used when a box requires a style that does not</span><br>          87:  <span style="background-color: white">           * correspond to anything in the parsed stylesheets.</span><br>          88:  <span style="background-color: white">           * @param decls An array of PropertyDeclaration objects created with </span><br>          89:  <span style="background-color: white">           * {@link #createLayoutPropertyDeclaration(CSSName, IdentValue)}</span><br>          90:  <span style="background-color: white">           * @see #createLayoutPropertyDeclaration(CSSName, IdentValue)</span><br>          91:  <span style="background-color: white">           */</span><br>          92:  <span style="background-color: red"> 99+      public static CascadedStyle createLayoutStyle(PropertyDeclaration[] decls) {</span><br>          93:  <span style="background-color: red"> 99+          return new CascadedStyle(Arrays.asList(decls).iterator());</span><br>          94:  <span style="background-color: white">          }</span><br>          95:  <span style="background-color: white">          </span><br>          96:  <span style="background-color: white">  26      public static CascadedStyle createLayoutStyle(List
       <propertydeclaration>
         decls) {
       </propertydeclaration></span><br>          97:  <span style="background-color: white">  26          return new CascadedStyle(decls.iterator());</span><br>          98:  <span style="background-color: white">          }    </span><br>          99:  <span style="background-color: white">          </span><br>         100:  <span style="background-color: white">          /**</span><br>         101:  <span style="background-color: white">           * Creates a <code>CascadedStyle</code> using style information from</span><br>         102:  <span style="background-color: white">           * <code>startingPoint</code> and then adding the property declarations</span><br>         103:  <span style="background-color: white">           * from <code>decls</code>.</span><br>         104:  <span style="background-color: white">           * @param decls An array of PropertyDeclaration objects created with </span><br>         105:  <span style="background-color: white">           * {@link #createLayoutPropertyDeclaration(CSSName, IdentValue)}</span><br>         106:  <span style="background-color: white">           * @see #createLayoutPropertyDeclaration(CSSName, IdentValue)</span><br>         107:  <span style="background-color: white">           */</span><br>         108:  <span style="background-color: white">   0      public static CascadedStyle createLayoutStyle(</span><br>         109:  <span style="background-color: white">                  CascadedStyle startingPoint, PropertyDeclaration[] decls) {</span><br>         110:  <span style="background-color: white">   0          return new CascadedStyle(startingPoint, Arrays.asList(decls).iterator());</span><br>         111:  <span style="background-color: white">          }</span><br>         112:  <span style="background-color: white">      </span><br>         113:  <span style="background-color: white">          /**</span><br>         114:  <span style="background-color: white">           * Creates a <code>PropertyDeclaration</code> suitable for passing to</span><br>         115:  <span style="background-color: white">           * {@link #createLayoutStyle(PropertyDeclaration[])} or</span><br>         116:  <span style="background-color: white">           * {@link #createLayoutStyle(CascadedStyle, PropertyDeclaration[])}</span><br>         117:  <span style="background-color: white">           */</span><br>         118:  <span style="background-color: red"> 99+      public static PropertyDeclaration createLayoutPropertyDeclaration(</span><br>         119:  <span style="background-color: white">                  CSSName cssName, IdentValue display) {</span><br>         120:  <span style="background-color: red"> 99+          CSSPrimitiveValue val = new PropertyValue(display);</span><br>         121:  <span style="background-color: white">              // Urk... kind of ugly, but we really want this value to be used</span><br>         122:  <span style="background-color: red"> 99+          return new PropertyDeclaration(cssName, val, true, StylesheetInfo.USER);</span><br>         123:  <span style="background-color: white">          }</span><br>         124:  <span style="background-color: white">      </span><br>         125:  <span style="background-color: white">   0      private CascadedStyle(CascadedStyle startingPoint, Iterator
       <propertydeclaration>
         props) {
       </propertydeclaration></span><br>         126:  <span style="background-color: white">   0          cascadedProperties = new TreeMap&lt;&gt;(startingPoint.cascadedProperties);</span><br>         127:  <span style="background-color: white">      </span><br>         128:  <span style="background-color: white">   0          addProperties(props);</span><br>         129:  <span style="background-color: white">          }</span><br>         130:  <span style="background-color: white">      </span><br>         131:  <span style="background-color: white">          /**</span><br>         132:  <span style="background-color: white">           * Default constructor with no initialization. Don't use this to instantiate</span><br>         133:  <span style="background-color: white">           * the class, as the class is immutable and this will leave it without any</span><br>         134:  <span style="background-color: white">           * properties.</span><br>         135:  <span style="background-color: white">           */</span><br>         136:  <span style="background-color: white"> 99+      private CascadedStyle() {</span><br>         137:  <span style="background-color: red"> 99+          cascadedProperties = new TreeMap&lt;&gt;();</span><br>         138:  <span style="background-color: white">          }</span><br>         139:  <span style="background-color: white">          /**</span><br>         140:  <span style="background-color: white">           * Creates a <code>CascadedStyle</code>, setting the display property to</span><br>         141:  <span style="background-color: white">           * to the value of the <code>display</code> parameter.</span><br>         142:  <span style="background-color: white">           */</span><br>         143:  <span style="background-color: red"> 99+      public static CascadedStyle createAnonymousStyle(IdentValue display) {</span><br>         144:  <span style="background-color: red"> 99+          CSSPrimitiveValue val = new PropertyValue(display);</span><br>         145:  <span style="background-color: white">      </span><br>         146:  <span style="background-color: red"> 99+          List
       <propertydeclaration>
         props = Collections.singletonList(
       </propertydeclaration></span><br>         147:  <span style="background-color: white">                      new PropertyDeclaration(CSSName.DISPLAY, val, true, StylesheetInfo.USER));</span><br>         148:  <span style="background-color: white">      </span><br>         149:  <span style="background-color: red"> 99+          return new CascadedStyle(props.iterator());</span><br>         150:  <span style="background-color: white">          }</span><br>         151:  <span style="background-color: white">      </span><br>         152:  <span style="background-color: red"> 99+      private void addProperties(java.util.Iterator
       <propertydeclaration>
         iter) {
       </propertydeclaration></span><br>         153:  <span style="background-color: white">      		/*</span><br>         154:  <span style="background-color: white">      		 * do a bucket-sort on importance and origin /properties should already be in</span><br>         155:  <span style="background-color: white">      		 * order of specificity</span><br>         156:  <span style="background-color: white">      		 */</span><br>         157:  <span style="background-color: white">              //noinspection unchecked</span><br>         158:  <span style="background-color: red"> 99+          @SuppressWarnings("unchecked")</span><br>         159:  <span style="background-color: white">              java.util.List
       <propertydeclaration>
        [] buckets =  new java.util.List[PropertyDeclaration.IMPORTANCE_AND_ORIGIN_COUNT];
       </propertydeclaration></span><br>         160:  <span style="background-color: white">      </span><br>         161:  <span style="background-color: red"> 99+          while (iter.hasNext()) {</span><br>         162:  <span style="background-color: red"> 99+              PropertyDeclaration prop = iter.next();</span><br>         163:  <span style="background-color: red"> 99+              List
       <propertydeclaration>
         bucket = buckets[prop.getImportanceAndOrigin()];
       </propertydeclaration></span><br>         164:  <span style="background-color: red"> 99+  			if (bucket == null) {</span><br>         165:  <span style="background-color: red"> 99+  				bucket = new ArrayList&lt;&gt;();</span><br>         166:  <span style="background-color: red"> 99+  				buckets[prop.getImportanceAndOrigin()]  = bucket;</span><br>         167:  <span style="background-color: white">      			}</span><br>         168:  <span style="background-color: red"> 99+              bucket.add(prop);</span><br>         169:  <span style="background-color: white">              }</span><br>         170:  <span style="background-color: white">      </span><br>         171:  <span style="background-color: red"> 99+          for (List
       <propertydeclaration>
         bucket : buckets) {
       </propertydeclaration></span><br>         172:  <span style="background-color: red"> 99+  			if (bucket == null)</span><br>         173:  <span style="background-color: red"> 99+  				continue;</span><br>         174:  <span style="background-color: red"> 99+              for (PropertyDeclaration prop : bucket) {</span><br>         175:  <span style="background-color: red"> 99+                  cascadedProperties.put(prop.getCSSName(), prop);</span><br>         176:  <span style="background-color: white">                  }</span><br>         177:  <span style="background-color: white">              }</span><br>         178:  <span style="background-color: white">          }</span><br>         179:  <span style="background-color: white">      </span><br>         180:  <span style="background-color: white">          /**</span><br>         181:  <span style="background-color: white">           * Get an empty singleton, used to negate inheritance of properties</span><br>         182:  <span style="background-color: white">           */</span><br>         183:  <span style="background-color: white">          public static final CascadedStyle emptyCascadedStyle = new CascadedStyle();</span><br>         184:  <span style="background-color: white">      </span><br>         185:  <span style="background-color: white">      </span><br>         186:  <span style="background-color: white">          /**</span><br>         187:  <span style="background-color: white">           * Returns true if property has been defined in this style.</span><br>         188:  <span style="background-color: white">           *</span><br>         189:  <span style="background-color: white">           * @param cssName The CSS property name, e.g. "font-family".</span><br>         190:  <span style="background-color: white">           * @return True if the property is defined in this set.</span><br>         191:  <span style="background-color: white">           */</span><br>         192:  <span style="background-color: red">   0      public boolean hasProperty(CSSName cssName) {</span><br>         193:  <span style="background-color: yellow">   0  		return cascadedProperties.get(cssName) != null;</span><br>         194:  <span style="background-color: white">          }</span><br>         195:  <span style="background-color: white">          /**</span><br>         196:  <span style="background-color: white">           * Returns a {@link com.openhtmltopdf.css.sheet.PropertyDeclaration} by CSS</span><br>         197:  <span style="background-color: white">           * property name, e.g. "font-family". Properties are already cascaded during</span><br>         198:  <span style="background-color: white">           * instantiation, so this will return the actual property (and corresponding</span><br>         199:  <span style="background-color: white">           * value) to use for CSS-based layout and rendering.</span><br>         200:  <span style="background-color: white">           *</span><br>         201:  <span style="background-color: white">           * @param cssName The CSS property name, e.g. "font-family".</span><br>         202:  <span style="background-color: white">           * @return The PropertyDeclaration, if declared in this set, or null</span><br>         203:  <span style="background-color: white">           *         if not found.</span><br>         204:  <span style="background-color: white">           */</span><br>         205:  <span style="background-color: red"> 99+      public PropertyDeclaration propertyByName(CSSName cssName) {</span><br>         206:  <span style="background-color: red"> 99+          return cascadedProperties.get(cssName);</span><br>         207:  <span style="background-color: white">          }</span><br>         208:  <span style="background-color: white">      </span><br>         209:  <span style="background-color: white">          /**</span><br>         210:  <span style="background-color: white">           * Gets the ident attribute of the CascadedStyle object</span><br>         211:  <span style="background-color: white">           *</span><br>         212:  <span style="background-color: white">           * @param cssName PARAM</span><br>         213:  <span style="background-color: white">           * @return The ident value</span><br>         214:  <span style="background-color: white">           */</span><br>         215:  <span style="background-color: white">   0      public IdentValue getIdent(CSSName cssName) {</span><br>         216:  <span style="background-color: white">   0          PropertyDeclaration pd = propertyByName(cssName);</span><br>         217:  <span style="background-color: white">   0          return (pd == null ? null : pd.asIdentValue());</span><br>         218:  <span style="background-color: white">          }</span><br>         219:  <span style="background-color: white">      </span><br>         220:  <span style="background-color: white">      </span><br>         221:  <span style="background-color: white">          /**</span><br>         222:  <span style="background-color: white">           * Returns an {@link java.util.Iterator} over the set of {@link</span><br>         223:  <span style="background-color: white">           * com.openhtmltopdf.css.sheet.PropertyDeclaration}s already matched in this</span><br>         224:  <span style="background-color: white">           * CascadedStyle. For a given property name, there may be no match, in which</span><br>         225:  <span style="background-color: white">           * case there will be no <code>PropertyDeclaration</code> for that property</span><br>         226:  <span style="background-color: white">           * name in the Iterator.</span><br>         227:  <span style="background-color: white">           *</span><br>         228:  <span style="background-color: white">           * @return Iterator over a set of properly cascaded PropertyDeclarations.</span><br>         229:  <span style="background-color: white">           */</span><br>         230:  <span style="background-color: red"> 99+      public java.util.Collection
       <propertydeclaration>
         getCascadedPropertyDeclarations() {
       </propertydeclaration></span><br>         231:  <span style="background-color: white"> 99+          return cascadedProperties.values();</span><br>         232:  <span style="background-color: white">          }</span><br>         233:  <span style="background-color: white">      </span><br>         234:  <span style="background-color: white">   0      public int countAssigned() { return cascadedProperties.size(); }</span><br>         235:  <span style="background-color: white">      </span><br>         236:  <span style="background-color: red"> 99+      public String getFingerprint() {</span><br>         237:  <span style="background-color: red"> 99+          if (this.fingerprint == null) {</span><br>         238:  <span style="background-color: red"> 99+              StringBuilder sb = new StringBuilder();</span><br>         239:  <span style="background-color: red"> 99+              for (PropertyDeclaration o : cascadedProperties.values()) {</span><br>         240:  <span style="background-color: red"> 99+                  sb.append(o.getFingerprint());</span><br>         241:  <span style="background-color: white">                  }</span><br>         242:  <span style="background-color: red"> 99+              this.fingerprint = sb.toString();</span><br>         243:  <span style="background-color: white">              }</span><br>         244:  <span style="background-color: white"> 99+          return this.fingerprint;</span><br>         245:  <span style="background-color: white">          }</span><br>         246:  <span style="background-color: white">      }// end class</span><br>         247:  <span style="background-color: white">      </span><br>         248:  <span style="background-color: white">      /*</span><br>         249:  <span style="background-color: white">       * $Id$</span><br>         250:  <span style="background-color: white">       *</span><br>         251:  <span style="background-color: white">       * $Log$</span><br>         252:  <span style="background-color: white">       * Revision 1.19  2007/10/31 23:14:41  peterbrant</span><br>         253:  <span style="background-color: white">       * Add rudimentary support for @font-face rules</span><br>         254:  <span style="background-color: white">       *</span><br>         255:  <span style="background-color: white">       * Revision 1.18  2007/04/12 12:29:11  peterbrant</span><br>         256:  <span style="background-color: white">       * Properly handle floated tables with captions</span><br>         257:  <span style="background-color: white">       *</span><br>         258:  <span style="background-color: white">       * Revision 1.17  2007/02/20 17:23:15  peterbrant</span><br>         259:  <span style="background-color: white">       * Optimize fingerprint calculation</span><br>         260:  <span style="background-color: white">       *</span><br>         261:  <span style="background-color: white">       * Revision 1.16  2007/02/20 01:17:09  peterbrant</span><br>         262:  <span style="background-color: white">       * Start CSS parser cleanup</span><br>         263:  <span style="background-color: white">       *</span><br>         264:  <span style="background-color: white">       * Revision 1.15  2007/02/07 16:33:14  peterbrant</span><br>         265:  <span style="background-color: white">       * Initial commit of rewritten table support and associated refactorings</span><br>         266:  <span style="background-color: white">       *</span><br>         267:  <span style="background-color: white">       * Revision 1.14  2006/06/15 20:02:39  tobega</span><br>         268:  <span style="background-color: white">       * Using a TreeMap to get properties in sorted order should be able to reduce the size of the caches in CalculatedStyle when styles are the same apart from order of declaration of properties.</span><br>         269:  <span style="background-color: white">       *</span><br>         270:  <span style="background-color: white">       * Revision 1.13  2006/01/09 23:22:24  peterbrant</span><br>         271:  <span style="background-color: white">       * Cache fingerprint after initial creation</span><br>         272:  <span style="background-color: white">       *</span><br>         273:  <span style="background-color: white">       * Revision 1.12  2005/10/20 20:48:02  pdoubleya</span><br>         274:  <span style="background-color: white">       * Updates for refactoring to style classes. CalculatedStyle now has lookup methods to cover all general cases, so propertyByName() is private, which means the backing classes for styling were able to be replaced.</span><br>         275:  <span style="background-color: white">       *</span><br>         276:  <span style="background-color: white">       * Revision 1.11  2005/06/21 08:06:47  pdoubleya</span><br>         277:  <span style="background-color: white">       * Changed to use Map of properties again.</span><br>         278:  <span style="background-color: white">       *</span><br>         279:  <span style="background-color: white">       * Revision 1.10  2005/05/16 13:48:58  tobega</span><br>         280:  <span style="background-color: white">       * Fixe inline border mismatch and started on styling problem in switching between blocks and inlines</span><br>         281:  <span style="background-color: white">       *</span><br>         282:  <span style="background-color: white">       * Revision 1.9  2005/05/08 15:37:26  tobega</span><br>         283:  <span style="background-color: white">       * Fixed up style caching so it really works (internalize CascadedStyles and let each CalculatedStyle keep track of its derived children)</span><br>         284:  <span style="background-color: white">       *</span><br>         285:  <span style="background-color: white">       * Revision 1.8  2005/05/08 13:02:36  tobega</span><br>         286:  <span style="background-color: white">       * Fixed a bug whereby styles could get lost for inline elements, notably if root element was inline. Did a few other things which probably has no importance at this moment, e.g. refactored out some unused stuff.</span><br>         287:  <span style="background-color: white">       *</span><br>         288:  <span style="background-color: white">       * Revision 1.7  2005/04/20 14:13:07  tobega</span><br>         289:  <span style="background-color: white">       * Issue number:</span><br>         290:  <span style="background-color: white">       * Obtained from:</span><br>         291:  <span style="background-color: white">       * Submitted by:</span><br>         292:  <span style="background-color: white">       * Reviewed by:</span><br>         293:  <span style="background-color: white">       *</span><br>         294:  <span style="background-color: white">       * Revision 1.6  2005/01/29 20:22:25  pdoubleya</span><br>         295:  <span style="background-color: white">       * Clean/reformat code. Removed commented blocks, checked copyright.</span><br>         296:  <span style="background-color: white">       *</span><br>         297:  <span style="background-color: white">       * Revision 1.5  2005/01/25 14:45:55  pdoubleya</span><br>         298:  <span style="background-color: white">       * Added support for IdentValue mapping on property declarations. On both CascadedStyle and PropertyDeclaration you can now request the value as an IdentValue, for object-object comparisons. Updated 99% of references that used to get the string value of PD to return the IdentValue instead; remaining cases are for pseudo-elements where the PD content needs to be manipulated as a String.</span><br>         299:  <span style="background-color: white">       *</span><br>         300:  <span style="background-color: white">       * Revision 1.4  2005/01/24 19:01:06  pdoubleya</span><br>         301:  <span style="background-color: white">       * Mass checkin. Changed to use references to CSSName, which now has a Singleton instance for each property, everywhere property names were being used before. Removed commented code. Cascaded and Calculated style now store properties in arrays rather than maps, for optimization.</span><br>         302:  <span style="background-color: white">       *</span><br>         303:  <span style="background-color: white">       * Revision 1.3  2004/11/15 13:40:14  pdoubleya</span><br>         304:  <span style="background-color: white">       * Updated JavaDoc.</span><br>         305:  <span style="background-color: white">       *</span><br>         306:  <span style="background-color: white">       * Revision 1.2  2004/11/15 12:42:22  pdoubleya</span><br>         307:  <span style="background-color: white">       * Across this checkin (all may not apply to this particular file)</span><br>         308:  <span style="background-color: white">       * Changed default/package-access members to private.</span><br>         309:  <span style="background-color: white">       * Changed to use XRRuntimeException where appropriate.</span><br>         310:  <span style="background-color: white">       * Began move from System.err.println to std logging.</span><br>         311:  <span style="background-color: white">       * Standard code reformat.</span><br>         312:  <span style="background-color: white">       * Removed some unnecessary SAC member variables that were only used in initialization.</span><br>         313:  <span style="background-color: white">       * CVS log section.</span><br>         314:  <span style="background-color: white">       *</span><br>         315:  <span style="background-color: white">       *</span><br>         316:  <span style="background-color: white">       */</span><br>         317:  <span style="background-color: white">      </span><br></pre> </code> 
   </div> 
   <div class="column"> 
    <h2>Patched Code:</h2> <code> <pre id="patched-trace">        1-&gt;N:  <span style="background-color: white">      /*</span><br>        2-&gt;N:  <span style="background-color: white">       * CascadedStyle.java</span><br>        3-&gt;N:  <span style="background-color: white">       * Copyright (c) 2004, 2005 Patrick Wright, Torbjoern Gannholm</span><br>        4-&gt;N:  <span style="background-color: white">       *</span><br>        5-&gt;N:  <span style="background-color: white">       * This program is free software; you can redistribute it and/or</span><br>        6-&gt;N:  <span style="background-color: white">       * modify it under the terms of the GNU Lesser General Public License</span><br>        7-&gt;N:  <span style="background-color: white">       * as published by the Free Software Foundation; either version 2.1</span><br>        8-&gt;N:  <span style="background-color: white">       * of the License, or (at your option) any later version.</span><br>        9-&gt;N:  <span style="background-color: white">       *</span><br>       10-&gt;N:  <span style="background-color: white">       * This program is distributed in the hope that it will be useful,</span><br>       11-&gt;N:  <span style="background-color: white">       * but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br>       12-&gt;N:  <span style="background-color: white">       * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span><br>       13-&gt;N:  <span style="background-color: white">       * GNU Lesser General Public License for more details.</span><br>       14-&gt;N:  <span style="background-color: white">       *</span><br>       15-&gt;N:  <span style="background-color: white">       * You should have received a copy of the GNU Lesser General Public License</span><br>       16-&gt;N:  <span style="background-color: white">       * along with this program; if not, write to the Free Software</span><br>       17-&gt;N:  <span style="background-color: white">       * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span><br>       18-&gt;N:  <span style="background-color: white">       *</span><br>       19-&gt;N:  <span style="background-color: white">       */</span><br>       20-&gt;N:  <span style="background-color: white">      package com.openhtmltopdf.css.newmatch;</span><br>       21-&gt;N:  <span style="background-color: white">      </span><br>       22-&gt;N:  <span style="background-color: white">      import java.util.ArrayList;</span><br>       23-&gt;N:  <span style="background-color: white">      import java.util.Arrays;</span><br>       24-&gt;N:  <span style="background-color: white">      import java.util.Collections;</span><br>       25-&gt;N:  <span style="background-color: white">      import java.util.Iterator;</span><br>       26-&gt;N:  <span style="background-color: white">      import java.util.List;</span><br>       27-&gt;N:  <span style="background-color: white">      import java.util.Map;</span><br>       28-&gt;N:  <span style="background-color: white">      import java.util.TreeMap;</span><br>       29-&gt;N:  <span style="background-color: white">      </span><br>       30-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.css.constants.CSSName;</span><br>       31-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.css.constants.IdentValue;</span><br>       32-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.css.parser.CSSPrimitiveValue;</span><br>       33-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.css.parser.PropertyValue;</span><br>       34-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.css.sheet.PropertyDeclaration;</span><br>       35-&gt;N:  <span style="background-color: white">      import com.openhtmltopdf.css.sheet.StylesheetInfo;</span><br>       36-&gt;N:  <span style="background-color: white">      </span><br>       37-&gt;N:  <span style="background-color: white">      </span><br>       38-&gt;N:  <span style="background-color: white">      /**</span><br>       39-&gt;N:  <span style="background-color: white">       * Holds a set of {@link com.openhtmltopdf.css.sheet.PropertyDeclaration}s for</span><br>       40-&gt;N:  <span style="background-color: white">       * each unique CSS property name. What properties belong in the set is not</span><br>       41-&gt;N:  <span style="background-color: white">       * determined, except that multiple entries are resolved into a single set using</span><br>       42-&gt;N:  <span style="background-color: white">       * cascading rules. The set is cascaded during instantiation, so once you have a</span><br>       43-&gt;N:  <span style="background-color: white">       * CascadedStyle, the PropertyDeclarations you retrieve from it will have been</span><br>       44-&gt;N:  <span style="background-color: white">       * resolved following the CSS cascading rules. Note that this class knows</span><br>       45-&gt;N:  <span style="background-color: white">       * nothing about CSS selector-matching rules. Before creating a CascadedStyle,</span><br>       46-&gt;N:  <span style="background-color: white">       * you will need to determine which PropertyDeclarations belong in the set--for</span><br>       47-&gt;N:  <span style="background-color: white">       * example, by matching {@link com.openhtmltopdf.css.sheet.Ruleset}s to {@link</span><br>       48-&gt;N:  <span style="background-color: white">       * org.w3c.dom.Document} {@link org.w3c.dom.Element}s via their selectors. You</span><br>       49-&gt;N:  <span style="background-color: white">       * can get individual properties by using {@link #propertyByName(CSSName)} or an</span><br>       50-&gt;N:  <span style="background-color: white">       * {@link java.util.Iterator} of properties with {@link</span><br>       51-&gt;N:  <span style="background-color: white">       * #getCascadedPropertyDeclarations()}. Check for individual property assignments</span><br>       52-&gt;N:  <span style="background-color: white">       * using {@link #hasProperty(CSSName)}. A CascadedStyle is immutable, as</span><br>       53-&gt;N:  <span style="background-color: white">       * properties can not be added or removed from it once instantiated.</span><br>       54-&gt;N:  <span style="background-color: white">       *</span><br>       55-&gt;N:  <span style="background-color: white">       * @author Torbjoern Gannholm</span><br>       56-&gt;N:  <span style="background-color: white">       * @author Patrick Wright</span><br>       57-&gt;N:  <span style="background-color: white">       */</span><br>       58-&gt;N:  <span style="background-color: white">      public class CascadedStyle {</span><br>       59-&gt;N:  <span style="background-color: white">          /**</span><br>       60-&gt;N:  <span style="background-color: white">           * Map of PropertyDeclarations, keyed by {@link CSSName}</span><br>       61-&gt;N:  <span style="background-color: white">           */</span><br>      62-&gt;62:  <span style="background-color: white">          private final Map
       <cssname, propertydeclaration>
         cascadedProperties;
       </cssname,></span><br>       63-&gt;N:  <span style="background-color: white">      </span><br>      64-&gt;64:  <span style="background-color: white">          private String fingerprint;</span><br>       65-&gt;N:  <span style="background-color: white">          </span><br>       66-&gt;N:  <span style="background-color: white">          /**</span><br>       67-&gt;N:  <span style="background-color: white">           * Constructs a new CascadedStyle, given an {@link java.util.Iterator} of</span><br>       68-&gt;N:  <span style="background-color: white">           * {@link com.openhtmltopdf.css.sheet.PropertyDeclaration}s already sorted</span><br>       69-&gt;N:  <span style="background-color: white">           * by specificity of the CSS selector they came from. The Iterator can have</span><br>       70-&gt;N:  <span style="background-color: white">           * multiple PropertyDeclarations with the same name; the property cascade</span><br>       71-&gt;N:  <span style="background-color: white">           * will be resolved during instantiation, resulting in a set of</span><br>       72-&gt;N:  <span style="background-color: white">           * PropertyDeclarations. Once instantiated, properties may be retrieved</span><br>       73-&gt;N:  <span style="background-color: white">           * using the normal API for the class.</span><br>       74-&gt;N:  <span style="background-color: white">           *</span><br>       75-&gt;N:  <span style="background-color: white">           * @param iter An Iterator containing PropertyDeclarations in order of</span><br>       76-&gt;N:  <span style="background-color: white">           *             specificity.</span><br>       77-&gt;N:  <span style="background-color: white">           */</span><br>      78-&gt;78:  <span style="background-color: cyan"> 99+      CascadedStyle(java.util.Iterator
       <propertydeclaration>
         iter) {
       </propertydeclaration></span><br>      79-&gt;79:  <span style="background-color: cyan"> 99+          this();</span><br>       80-&gt;N:  <span style="background-color: white">      </span><br>      81-&gt;81:  <span style="background-color: cyan"> 99+          addProperties(iter);</span><br>       82-&gt;N:  <span style="background-color: white">          }</span><br>       83-&gt;N:  <span style="background-color: white">          </span><br>       84-&gt;N:  <span style="background-color: white">          /**</span><br>       85-&gt;N:  <span style="background-color: white">           * Creates a <code>CascadedStyle</code> using the provided property</span><br>       86-&gt;N:  <span style="background-color: white">           * declarations.  It is used when a box requires a style that does not</span><br>       87-&gt;N:  <span style="background-color: white">           * correspond to anything in the parsed stylesheets.</span><br>       88-&gt;N:  <span style="background-color: white">           * @param decls An array of PropertyDeclaration objects created with </span><br>       89-&gt;N:  <span style="background-color: white">           * {@link #createLayoutPropertyDeclaration(CSSName, IdentValue)}</span><br>       90-&gt;N:  <span style="background-color: white">           * @see #createLayoutPropertyDeclaration(CSSName, IdentValue)</span><br>       91-&gt;N:  <span style="background-color: white">           */</span><br>      92-&gt;92:  <span style="background-color: cyan"> 99+      public static CascadedStyle createLayoutStyle(PropertyDeclaration[] decls) {</span><br>      93-&gt;93:  <span style="background-color: cyan"> 99+          return new CascadedStyle(Arrays.asList(decls).iterator());</span><br>       94-&gt;N:  <span style="background-color: white">          }</span><br>       95-&gt;N:  <span style="background-color: white">          </span><br>      96-&gt;96:  <span style="background-color: white">  26      public static CascadedStyle createLayoutStyle(List
       <propertydeclaration>
         decls) {
       </propertydeclaration></span><br>      97-&gt;97:  <span style="background-color: white">  26          return new CascadedStyle(decls.iterator());</span><br>       98-&gt;N:  <span style="background-color: white">          }    </span><br>       99-&gt;N:  <span style="background-color: white">          </span><br>      100-&gt;N:  <span style="background-color: white">          /**</span><br>      101-&gt;N:  <span style="background-color: white">           * Creates a <code>CascadedStyle</code> using style information from</span><br>      102-&gt;N:  <span style="background-color: white">           * <code>startingPoint</code> and then adding the property declarations</span><br>      103-&gt;N:  <span style="background-color: white">           * from <code>decls</code>.</span><br>      104-&gt;N:  <span style="background-color: white">           * @param decls An array of PropertyDeclaration objects created with </span><br>      105-&gt;N:  <span style="background-color: white">           * {@link #createLayoutPropertyDeclaration(CSSName, IdentValue)}</span><br>      106-&gt;N:  <span style="background-color: white">           * @see #createLayoutPropertyDeclaration(CSSName, IdentValue)</span><br>      107-&gt;N:  <span style="background-color: white">           */</span><br>    108-&gt;108:  <span style="background-color: white">   0      public static CascadedStyle createLayoutStyle(</span><br>    109-&gt;109:  <span style="background-color: white">                  CascadedStyle startingPoint, PropertyDeclaration[] decls) {</span><br>    110-&gt;110:  <span style="background-color: white">   0          return new CascadedStyle(startingPoint, Arrays.asList(decls).iterator());</span><br>      111-&gt;N:  <span style="background-color: white">          }</span><br>      112-&gt;N:  <span style="background-color: white">      </span><br>      113-&gt;N:  <span style="background-color: white">          /**</span><br>      114-&gt;N:  <span style="background-color: white">           * Creates a <code>PropertyDeclaration</code> suitable for passing to</span><br>      115-&gt;N:  <span style="background-color: white">           * {@link #createLayoutStyle(PropertyDeclaration[])} or</span><br>      116-&gt;N:  <span style="background-color: white">           * {@link #createLayoutStyle(CascadedStyle, PropertyDeclaration[])}</span><br>      117-&gt;N:  <span style="background-color: white">           */</span><br>    118-&gt;118:  <span style="background-color: cyan"> 99+      public static PropertyDeclaration createLayoutPropertyDeclaration(</span><br>    119-&gt;119:  <span style="background-color: white">                  CSSName cssName, IdentValue display) {</span><br>    120-&gt;120:  <span style="background-color: cyan"> 99+          CSSPrimitiveValue val = new PropertyValue(display);</span><br>      121-&gt;N:  <span style="background-color: white">              // Urk... kind of ugly, but we really want this value to be used</span><br>    122-&gt;122:  <span style="background-color: cyan"> 99+          return new PropertyDeclaration(cssName, val, true, StylesheetInfo.USER);</span><br>      123-&gt;N:  <span style="background-color: white">          }</span><br>      124-&gt;N:  <span style="background-color: white">      </span><br>    125-&gt;125:  <span style="background-color: white">   0      private CascadedStyle(CascadedStyle startingPoint, Iterator
       <propertydeclaration>
         props) {
       </propertydeclaration></span><br>    126-&gt;126:  <span style="background-color: white">   0          cascadedProperties = new TreeMap&lt;&gt;(startingPoint.cascadedProperties);</span><br>      127-&gt;N:  <span style="background-color: white">      </span><br>    128-&gt;128:  <span style="background-color: white">   0          addProperties(props);</span><br>      129-&gt;N:  <span style="background-color: white">          }</span><br>      130-&gt;N:  <span style="background-color: white">      </span><br>      131-&gt;N:  <span style="background-color: white">          /**</span><br>      132-&gt;N:  <span style="background-color: white">           * Default constructor with no initialization. Don't use this to instantiate</span><br>      133-&gt;N:  <span style="background-color: white">           * the class, as the class is immutable and this will leave it without any</span><br>      134-&gt;N:  <span style="background-color: white">           * properties.</span><br>      135-&gt;N:  <span style="background-color: white">           */</span><br>      136-&gt;N:  <span style="background-color: white"> 99+      private CascadedStyle() {</span><br>    137-&gt;137:  <span style="background-color: cyan"> 99+          cascadedProperties = new TreeMap&lt;&gt;();</span><br>      138-&gt;N:  <span style="background-color: white">          }</span><br>      139-&gt;N:  <span style="background-color: white">      </span><br>      140-&gt;N:  <span style="background-color: white">          /**</span><br>      141-&gt;N:  <span style="background-color: white">           * Creates an otherwise empty <code>CascadedStyle</code>, setting the display property</span><br>      142-&gt;N:  <span style="background-color: white">           * to the value of the <code>display</code> parameter.</span><br>      143-&gt;N:  <span style="background-color: white">           */</span><br>    144-&gt;143:  <span style="background-color: cyan"> 99+      public static CascadedStyle createAnonymousStyle(IdentValue display) {</span><br>    145-&gt;144:  <span style="background-color: cyan"> 99+          CSSPrimitiveValue val = new PropertyValue(display);</span><br>      146-&gt;N:  <span style="background-color: white">      </span><br>    147-&gt;146:  <span style="background-color: cyan"> 99+          List
       <propertydeclaration>
         props = Collections.singletonList(
       </propertydeclaration></span><br>    148-&gt;147:  <span style="background-color: white">                      new PropertyDeclaration(CSSName.DISPLAY, val, true, StylesheetInfo.USER));</span><br>      149-&gt;N:  <span style="background-color: white">      </span><br>    150-&gt;149:  <span style="background-color: cyan"> 99+          return new CascadedStyle(props.iterator());</span><br>      151-&gt;N:  <span style="background-color: white">          }</span><br>      152-&gt;N:  <span style="background-color: white">      </span><br>    153-&gt;152:  <span style="background-color: cyan"> 99+      private void addProperties(java.util.Iterator
       <propertydeclaration>
         iter) {
       </propertydeclaration></span><br>      154-&gt;N:  <span style="background-color: white">      		/*</span><br>      155-&gt;N:  <span style="background-color: white">      		 * do a bucket-sort on importance and origin /properties should already be in</span><br>      156-&gt;N:  <span style="background-color: white">      		 * order of specificity</span><br>      157-&gt;N:  <span style="background-color: white">      		 */</span><br>      158-&gt;N:  <span style="background-color: white">              //noinspection unchecked</span><br>    159-&gt;158:  <span style="background-color: cyan"> 99+          @SuppressWarnings("unchecked")</span><br>    160-&gt;159:  <span style="background-color: white">              java.util.List
       <propertydeclaration>
        [] buckets =  new java.util.List[PropertyDeclaration.IMPORTANCE_AND_ORIGIN_COUNT];
       </propertydeclaration></span><br>      161-&gt;N:  <span style="background-color: white">      </span><br>    162-&gt;161:  <span style="background-color: cyan"> 99+          while (iter.hasNext()) {</span><br>    163-&gt;162:  <span style="background-color: cyan"> 99+              PropertyDeclaration prop = iter.next();</span><br>    164-&gt;163:  <span style="background-color: cyan"> 99+              List
       <propertydeclaration>
         bucket = buckets[prop.getImportanceAndOrigin()];
       </propertydeclaration></span><br>    165-&gt;164:  <span style="background-color: cyan"> 99+  			if (bucket == null) {</span><br>    166-&gt;165:  <span style="background-color: cyan"> 99+  				bucket = new ArrayList&lt;&gt;();</span><br>    167-&gt;166:  <span style="background-color: cyan"> 99+  				buckets[prop.getImportanceAndOrigin()]  = bucket;</span><br>      168-&gt;N:  <span style="background-color: white">      			}</span><br>    169-&gt;168:  <span style="background-color: cyan"> 99+              bucket.add(prop);</span><br>      170-&gt;N:  <span style="background-color: white">              }</span><br>      171-&gt;N:  <span style="background-color: white">      </span><br>    172-&gt;171:  <span style="background-color: cyan"> 99+          for (List
       <propertydeclaration>
         bucket : buckets) {
       </propertydeclaration></span><br>    173-&gt;172:  <span style="background-color: cyan"> 99+  			if (bucket == null)</span><br>    174-&gt;173:  <span style="background-color: cyan"> 99+  				continue;</span><br>    175-&gt;174:  <span style="background-color: cyan"> 99+              for (PropertyDeclaration prop : bucket) {</span><br>    176-&gt;175:  <span style="background-color: cyan"> 99+                  cascadedProperties.put(prop.getCSSName(), prop);</span><br>      177-&gt;N:  <span style="background-color: white">                  }</span><br>      178-&gt;N:  <span style="background-color: white">              }</span><br>      179-&gt;N:  <span style="background-color: white">          }</span><br>      180-&gt;N:  <span style="background-color: white">      </span><br>      181-&gt;N:  <span style="background-color: white">          /**</span><br>      182-&gt;N:  <span style="background-color: white">           * Get an empty singleton, used to negate inheritance of properties</span><br>      183-&gt;N:  <span style="background-color: white">           */</span><br>    184-&gt;183:  <span style="background-color: white">          public static final CascadedStyle emptyCascadedStyle = new CascadedStyle();</span><br>      185-&gt;N:  <span style="background-color: white">      </span><br>      186-&gt;N:  <span style="background-color: white">      </span><br>      187-&gt;N:  <span style="background-color: white">          /**</span><br>      188-&gt;N:  <span style="background-color: white">           * Returns true if property has been defined in this style.</span><br>      189-&gt;N:  <span style="background-color: white">           *</span><br>      190-&gt;N:  <span style="background-color: white">           * @param cssName The CSS property name, e.g. "font-family".</span><br>      191-&gt;N:  <span style="background-color: white">           * @return True if the property is defined in this set.</span><br>      192-&gt;N:  <span style="background-color: white">           */</span><br>    193-&gt;192:  <span style="background-color: cyan">  96      public boolean hasProperty(CSSName cssName) {</span><br>      194-&gt;U:  <span style="background-color: yellow">  96          return cascadedProperties.containsKey(cssName);</span><br>      195-&gt;N:  <span style="background-color: white">          }</span><br>      196-&gt;N:  <span style="background-color: white">      </span><br>      197-&gt;N:  <span style="background-color: white">          /**</span><br>      198-&gt;N:  <span style="background-color: white">           * Returns a {@link com.openhtmltopdf.css.sheet.PropertyDeclaration} by CSS</span><br>      199-&gt;N:  <span style="background-color: white">           * property name, e.g. "font-family". Properties are already cascaded during</span><br>      200-&gt;N:  <span style="background-color: white">           * instantiation, so this will return the actual property (and corresponding</span><br>      201-&gt;N:  <span style="background-color: white">           * value) to use for CSS-based layout and rendering.</span><br>      202-&gt;N:  <span style="background-color: white">           *</span><br>      203-&gt;N:  <span style="background-color: white">           * @param cssName The CSS property name, e.g. "font-family".</span><br>      204-&gt;N:  <span style="background-color: white">           * @return The PropertyDeclaration, if declared in this set, or null</span><br>      205-&gt;N:  <span style="background-color: white">           *         if not found.</span><br>      206-&gt;N:  <span style="background-color: white">           */</span><br>    207-&gt;205:  <span style="background-color: cyan"> 99+      public PropertyDeclaration propertyByName(CSSName cssName) {</span><br>    208-&gt;206:  <span style="background-color: cyan"> 99+          return cascadedProperties.get(cssName);</span><br>      209-&gt;N:  <span style="background-color: white">          }</span><br>      210-&gt;N:  <span style="background-color: white">      </span><br>      211-&gt;N:  <span style="background-color: white">          /**</span><br>      212-&gt;N:  <span style="background-color: white">           * Gets the ident attribute of the CascadedStyle object</span><br>      213-&gt;N:  <span style="background-color: white">           *</span><br>      214-&gt;N:  <span style="background-color: white">           * @param cssName PARAM</span><br>      215-&gt;N:  <span style="background-color: white">           * @return The ident value</span><br>      216-&gt;N:  <span style="background-color: white">           */</span><br>    217-&gt;215:  <span style="background-color: white">   0      public IdentValue getIdent(CSSName cssName) {</span><br>    218-&gt;216:  <span style="background-color: white">   0          PropertyDeclaration pd = propertyByName(cssName);</span><br>    219-&gt;217:  <span style="background-color: white">   0          return (pd == null ? null : pd.asIdentValue());</span><br>      220-&gt;N:  <span style="background-color: white">          }</span><br>      221-&gt;N:  <span style="background-color: white">      </span><br>      222-&gt;N:  <span style="background-color: white">      </span><br>      223-&gt;N:  <span style="background-color: white">          /**</span><br>      224-&gt;N:  <span style="background-color: white">           * Returns an {@link java.util.Iterator} over the set of {@link</span><br>      225-&gt;N:  <span style="background-color: white">           * com.openhtmltopdf.css.sheet.PropertyDeclaration}s already matched in this</span><br>      226-&gt;N:  <span style="background-color: white">           * CascadedStyle. For a given property name, there may be no match, in which</span><br>      227-&gt;N:  <span style="background-color: white">           * case there will be no <code>PropertyDeclaration</code> for that property</span><br>      228-&gt;N:  <span style="background-color: white">           * name in the Iterator.</span><br>      229-&gt;N:  <span style="background-color: white">           *</span><br>      230-&gt;N:  <span style="background-color: white">           * @return Iterator over a set of properly cascaded PropertyDeclarations.</span><br>      231-&gt;N:  <span style="background-color: white">           */</span><br>    232-&gt;230:  <span style="background-color: cyan"> 99+      public java.util.Collection
       <propertydeclaration>
         getCascadedPropertyDeclarations() {
       </propertydeclaration></span><br>      233-&gt;N:  <span style="background-color: white"> 99+          return cascadedProperties.values();</span><br>      234-&gt;N:  <span style="background-color: white">          }</span><br>      235-&gt;N:  <span style="background-color: white">      </span><br>    236-&gt;234:  <span style="background-color: white">   0      public int countAssigned() { return cascadedProperties.size(); }</span><br>      237-&gt;N:  <span style="background-color: white">      </span><br>    238-&gt;236:  <span style="background-color: cyan"> 99+      public String getFingerprint() {</span><br>    239-&gt;237:  <span style="background-color: cyan"> 99+          if (this.fingerprint == null) {</span><br>    240-&gt;238:  <span style="background-color: cyan"> 99+              StringBuilder sb = new StringBuilder();</span><br>    241-&gt;239:  <span style="background-color: cyan"> 99+              for (PropertyDeclaration o : cascadedProperties.values()) {</span><br>    242-&gt;240:  <span style="background-color: cyan"> 99+                  sb.append(o.getFingerprint());</span><br>      243-&gt;N:  <span style="background-color: white">                  }</span><br>    244-&gt;242:  <span style="background-color: cyan"> 99+              this.fingerprint = sb.toString();</span><br>      245-&gt;N:  <span style="background-color: white">              }</span><br>      246-&gt;N:  <span style="background-color: white"> 99+          return this.fingerprint;</span><br>      247-&gt;N:  <span style="background-color: white">          }</span><br>      248-&gt;N:  <span style="background-color: white">      }</span><br></pre> </code> 
   </div> 
  </div>  
 </body>
</html>