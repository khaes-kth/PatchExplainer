<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <title>Execution Trace Diff</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <style>
* {
  box-sizing: border-box;
}

/* Create two equal columns that floats next to each other */
.column {
  float: left;
  width: 50%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

.test {
    border: 1px solid darkblue;
    padding-left: 10px;
}
</style> 
 </head> 
 <body> 
  <div class="row test"> 
   <h2>Differencing Test:</h2> <code> <pre>@Test <br>
public void test_main(){ <br>
    String ret = NumberAnalyzer.analyze(1); <br>
    assertThat(ret, containsString("greater")); <br>
}
        </pre> </code> 
  </div> 
  <div class="row"> 
   <div class="column"> 
    <h2>Original Code:</h2> <code> <pre id="original-trace">           1:  <span style="background-color: white">      package com.alibaba.spring.util;</span><br>           2:  <span style="background-color: white">      </span><br>           3:  <span style="background-color: white">      import org.springframework.core.annotation.AnnotationAttributes;</span><br>           4:  <span style="background-color: white">      import org.springframework.core.env.Environment;</span><br>           5:  <span style="background-color: white">      import org.springframework.core.env.PropertyResolver;</span><br>           6:  <span style="background-color: white">      import org.springframework.util.ClassUtils;</span><br>           7:  <span style="background-color: white">      </span><br>           8:  <span style="background-color: white">      import java.lang.annotation.Annotation;</span><br>           9:  <span style="background-color: white">      import java.lang.annotation.ElementType;</span><br>          10:  <span style="background-color: white">      import java.lang.annotation.Retention;</span><br>          11:  <span style="background-color: white">      import java.lang.annotation.RetentionPolicy;</span><br>          12:  <span style="background-color: white">      import java.lang.annotation.Target;</span><br>          13:  <span style="background-color: white">      import java.lang.reflect.AnnotatedElement;</span><br>          14:  <span style="background-color: white">      import java.lang.reflect.Method;</span><br>          15:  <span style="background-color: white">      import java.util.Collections;</span><br>          16:  <span style="background-color: white">      import java.util.HashSet;</span><br>          17:  <span style="background-color: white">      import java.util.LinkedHashMap;</span><br>          18:  <span style="background-color: white">      import java.util.LinkedList;</span><br>          19:  <span style="background-color: white">      import java.util.List;</span><br>          20:  <span style="background-color: white">      import java.util.Map;</span><br>          21:  <span style="background-color: white">      import java.util.Set;</span><br>          22:  <span style="background-color: white">      </span><br>          23:  <span style="background-color: white">      import static java.lang.String.valueOf;</span><br>          24:  <span style="background-color: white">      import static java.util.Arrays.asList;</span><br>          25:  <span style="background-color: white">      import static org.springframework.core.annotation.AnnotationAttributes.fromMap;</span><br>          26:  <span style="background-color: white">      import static org.springframework.core.annotation.AnnotationUtils.findAnnotation;</span><br>          27:  <span style="background-color: white">      import static org.springframework.core.annotation.AnnotationUtils.getDefaultValue;</span><br>          28:  <span style="background-color: white">      import static org.springframework.util.ClassUtils.resolveClassName;</span><br>          29:  <span style="background-color: white">      import static org.springframework.util.CollectionUtils.arrayToList;</span><br>          30:  <span style="background-color: white">      import static org.springframework.util.CollectionUtils.isEmpty;</span><br>          31:  <span style="background-color: white">      import static org.springframework.util.ObjectUtils.nullSafeEquals;</span><br>          32:  <span style="background-color: white">      import static org.springframework.util.ReflectionUtils.findMethod;</span><br>          33:  <span style="background-color: white">      import static org.springframework.util.ReflectionUtils.invokeMethod;</span><br>          34:  <span style="background-color: white">      import static org.springframework.util.StringUtils.trimWhitespace;</span><br>          35:  <span style="background-color: white">      </span><br>          36:  <span style="background-color: white">      /**</span><br>          37:  <span style="background-color: white">       * {@link Annotation} Utilities</span><br>          38:  <span style="background-color: white">       *</span><br>          39:  <span style="background-color: white">       * @author <a href="mailto:mercyblitz@gmail.com">Mercy</a></span><br>          40:  <span style="background-color: white">       * @see Annotation</span><br>          41:  <span style="background-color: white">       * @since 2017.01.13</span><br>          42:  <span style="background-color: white">       */</span><br>          43:  <span style="background-color: white">      @SuppressWarnings("unchecked")</span><br>          44:  <span style="background-color: white">      public abstract class AnnotationUtils {</span><br>          45:  <span style="background-color: white">      </span><br>          46:  <span style="background-color: white">          /**</span><br>          47:  <span style="background-color: white">           * The class name of AnnotatedElementUtils that is introduced since Spring Framework 4</span><br>          48:  <span style="background-color: white">           */</span><br>          49:  <span style="background-color: white">          public static final String ANNOTATED_ELEMENT_UTILS_CLASS_NAME = "org.springframework.core.annotation.AnnotatedElementUtils";</span><br>          50:  <span style="background-color: white">      </span><br>          51:  <span style="background-color: white">          /**</span><br>          52:  <span style="background-color: white">           * Is specified {@link Annotation} present on {@link Method}'s declaring class or parameters or itself.</span><br>          53:  <span style="background-color: white">           *</span><br>          54:  <span style="background-color: white">           * @param method          {@link Method}</span><br>          55:  <span style="background-color: white">           * @param annotationClass {@link Annotation} type</span><br>          56:  <span style="background-color: white">           * @param <a>             {@link Annotation} type</a></span><br>          57:  <span style="background-color: white">           * @return If present , return <code>true</code> , or <code>false</code></span><br>          58:  <span style="background-color: white">           */</span><br>          59:  <span style="background-color: white">   5      public static <a extends annotation> boolean isPresent(Method method, Class</a><a> annotationClass) {</a></span><br>          60:  <span style="background-color: white">      </span><br>          61:  <span style="background-color: white">   5          Map
       <elementtype, list<a>
        &gt; annotationsMap = findAnnotations(method, annotationClass);
       </elementtype,></span><br>          62:  <span style="background-color: white">      </span><br>          63:  <span style="background-color: white">   5          return !annotationsMap.isEmpty();</span><br>          64:  <span style="background-color: white">      </span><br>          65:  <span style="background-color: white">          }</span><br>          66:  <span style="background-color: white">      </span><br>          67:  <span style="background-color: white">          /**</span><br>          68:  <span style="background-color: white">           * Find specified {@link Annotation} type maps from {@link Method}</span><br>          69:  <span style="background-color: white">           *</span><br>          70:  <span style="background-color: white">           * @param method          {@link Method}</span><br>          71:  <span style="background-color: white">           * @param annotationClass {@link Annotation} type</span><br>          72:  <span style="background-color: white">           * @param <a>             {@link Annotation} type</a></span><br>          73:  <span style="background-color: white">           * @return {@link Annotation} type maps , the {@link ElementType} as key ,</span><br>          74:  <span style="background-color: white">           * the list of {@link Annotation} as value.</span><br>          75:  <span style="background-color: white">           * If {@link Annotation} was annotated on {@link Method}'s parameters{@link ElementType#PARAMETER} ,</span><br>          76:  <span style="background-color: white">           * the associated {@link Annotation} list may contain multiple elements.</span><br>          77:  <span style="background-color: white">           */</span><br>          78:  <span style="background-color: white">   8      public static <a extends annotation> Map
        <elementtype, list<a>
         &gt; findAnnotations(Method method,
        </elementtype,></a></span><br>          79:  <span style="background-color: white">                                                                                         Class<a> annotationClass) {</a></span><br>          80:  <span style="background-color: white">      </span><br>          81:  <span style="background-color: white">   8          Retention retention = annotationClass.getAnnotation(Retention.class);</span><br>          82:  <span style="background-color: white">      </span><br>          83:  <span style="background-color: white">   8          RetentionPolicy retentionPolicy = retention.value();</span><br>          84:  <span style="background-color: white">      </span><br>          85:  <span style="background-color: white">   8          if (!RetentionPolicy.RUNTIME.equals(retentionPolicy)) {</span><br>          86:  <span style="background-color: white">   2              return Collections.emptyMap();</span><br>          87:  <span style="background-color: white">              }</span><br>          88:  <span style="background-color: white">      </span><br>          89:  <span style="background-color: white">   6          Map
       <elementtype, list<a>
        &gt; annotationsMap = new LinkedHashMap
        <elementtype, list<a>
         &gt;();
        </elementtype,>
       </elementtype,></span><br>          90:  <span style="background-color: white">      </span><br>          91:  <span style="background-color: white">   6          Target target = annotationClass.getAnnotation(Target.class);</span><br>          92:  <span style="background-color: white">      </span><br>          93:  <span style="background-color: white">   6          ElementType[] elementTypes = target.value();</span><br>          94:  <span style="background-color: white">      </span><br>          95:  <span style="background-color: white">      </span><br>          96:  <span style="background-color: white">   6          for (ElementType elementType : elementTypes) {</span><br>          97:  <span style="background-color: white">      </span><br>          98:  <span style="background-color: white">  18              List<a> annotationsList = new LinkedList</a><a>();</a></span><br>          99:  <span style="background-color: white">      </span><br>         100:  <span style="background-color: white">  18              switch (elementType) {</span><br>         101:  <span style="background-color: white">      </span><br>         102:  <span style="background-color: white">   6                  case PARAMETER:</span><br>         103:  <span style="background-color: white">      </span><br>         104:  <span style="background-color: white">   6                      Annotation[][] parameterAnnotations = method.getParameterAnnotations();</span><br>         105:  <span style="background-color: white">      </span><br>         106:  <span style="background-color: white">   6                      for (Annotation[] annotations : parameterAnnotations) {</span><br>         107:  <span style="background-color: white">      </span><br>         108:  <span style="background-color: white">   6                          for (Annotation annotation : annotations) {</span><br>         109:  <span style="background-color: white">      </span><br>         110:  <span style="background-color: white">   5                              if (annotationClass.equals(annotation.annotationType())) {</span><br>         111:  <span style="background-color: white">      </span><br>         112:  <span style="background-color: white">   5                                  annotationsList.add((A) annotation);</span><br>         113:  <span style="background-color: white">      </span><br>         114:  <span style="background-color: white">                                  }</span><br>         115:  <span style="background-color: white">      </span><br>         116:  <span style="background-color: white">                              }</span><br>         117:  <span style="background-color: white">      </span><br>         118:  <span style="background-color: white">                          }</span><br>         119:  <span style="background-color: white">      </span><br>         120:  <span style="background-color: white">   6                      break;</span><br>         121:  <span style="background-color: white">      </span><br>         122:  <span style="background-color: white">   6                  case METHOD:</span><br>         123:  <span style="background-color: white">      </span><br>         124:  <span style="background-color: white">   6                      A annotation = findAnnotation(method, annotationClass);</span><br>         125:  <span style="background-color: white">      </span><br>         126:  <span style="background-color: white">   6                      if (annotation != null) {</span><br>         127:  <span style="background-color: white">      </span><br>         128:  <span style="background-color: white">   5                          annotationsList.add(annotation);</span><br>         129:  <span style="background-color: white">      </span><br>         130:  <span style="background-color: white">                          }</span><br>         131:  <span style="background-color: white">      </span><br>         132:  <span style="background-color: white">   6                      break;</span><br>         133:  <span style="background-color: white">      </span><br>         134:  <span style="background-color: white">   6                  case TYPE:</span><br>         135:  <span style="background-color: white">      </span><br>         136:  <span style="background-color: white">   6                      Class<!--?--> beanType = method.getDeclaringClass();</span><br>         137:  <span style="background-color: white">      </span><br>         138:  <span style="background-color: white">   6                      A annotation2 = findAnnotation(beanType, annotationClass);</span><br>         139:  <span style="background-color: white">      </span><br>         140:  <span style="background-color: white">   6                      if (annotation2 != null) {</span><br>         141:  <span style="background-color: white">      </span><br>         142:  <span style="background-color: white">   5                          annotationsList.add(annotation2);</span><br>         143:  <span style="background-color: white">      </span><br>         144:  <span style="background-color: white">                          }</span><br>         145:  <span style="background-color: white">      </span><br>         146:  <span style="background-color: white">   6                      break;</span><br>         147:  <span style="background-color: white">      </span><br>         148:  <span style="background-color: white">                  }</span><br>         149:  <span style="background-color: white">      </span><br>         150:  <span style="background-color: white">  18              if (!annotationsList.isEmpty()) {</span><br>         151:  <span style="background-color: white">      </span><br>         152:  <span style="background-color: white">  13                  annotationsMap.put(elementType, annotationsList);</span><br>         153:  <span style="background-color: white">      </span><br>         154:  <span style="background-color: white">                  }</span><br>         155:  <span style="background-color: white">      </span><br>         156:  <span style="background-color: white">      </span><br>         157:  <span style="background-color: white">              }</span><br>         158:  <span style="background-color: white">      </span><br>         159:  <span style="background-color: white">   6          return Collections.unmodifiableMap(annotationsMap);</span><br>         160:  <span style="background-color: white">      </span><br>         161:  <span style="background-color: white">          }</span><br>         162:  <span style="background-color: white">      </span><br>         163:  <span style="background-color: white">          /**</span><br>         164:  <span style="background-color: white">           * Get the {@link Annotation} attributes</span><br>         165:  <span style="background-color: white">           *</span><br>         166:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>         167:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         168:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         169:  <span style="background-color: white">           * @return non-null</span><br>         170:  <span style="background-color: white">           * @since 1.0.2</span><br>         171:  <span style="background-color: white">           */</span><br>         172:  <span style="background-color: white">   4      public static Map
       <string, object>
         getAttributes(Annotation annotation, boolean ignoreDefaultValue,
       </string,></span><br>         173:  <span style="background-color: white">                                                          String... ignoreAttributeNames) {</span><br>         174:  <span style="background-color: white">   4          return getAttributes(annotation, null, ignoreDefaultValue, ignoreAttributeNames);</span><br>         175:  <span style="background-color: white">          }</span><br>         176:  <span style="background-color: white">      </span><br>         177:  <span style="background-color: white">          /**</span><br>         178:  <span style="background-color: white">           * Get the {@link Annotation} attributes</span><br>         179:  <span style="background-color: white">           *</span><br>         180:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>         181:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>         182:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         183:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         184:  <span style="background-color: white">           * @return non-null</span><br>         185:  <span style="background-color: white">           * @since 1.0.2</span><br>         186:  <span style="background-color: white">           */</span><br>         187:  <span style="background-color: yellow">  22      public static Map
       <string, object>
         getAttributes(Annotation annotation, PropertyResolver propertyResolver,
       </string,></span><br>         188:  <span style="background-color: yellow">                                                          boolean ignoreDefaultValue, String... ignoreAttributeNames) {</span><br>         189:  <span style="background-color: yellow">      </span><br>         190:  <span style="background-color: yellow">  22          Map
       <string, object>
         annotationAttributes = org.springframework.core.annotation.AnnotationUtils.getAnnotationAttributes(annotation);
       </string,></span><br>         191:  <span style="background-color: yellow">      </span><br>         192:  <span style="background-color: yellow">  22          String[] actualIgnoreAttributeNames = ignoreAttributeNames;</span><br>         193:  <span style="background-color: yellow">      </span><br>         194:  <span style="background-color: yellow">  22          if (ignoreDefaultValue &amp;&amp; !isEmpty(annotationAttributes)) {</span><br>         195:  <span style="background-color: yellow">      </span><br>         196:  <span style="background-color: yellow">  11              List
       <string>
         attributeNamesToIgnore = new LinkedList
        <string>
         (asList(ignoreAttributeNames));
        </string>
       </string></span><br>         197:  <span style="background-color: yellow">      </span><br>         198:  <span style="background-color: yellow">  11              for (Map.Entry
       <string, object>
         annotationAttribute : annotationAttributes.entrySet()) {
       </string,></span><br>         199:  <span style="background-color: yellow">  44                  String attributeName = annotationAttribute.getKey();</span><br>         200:  <span style="background-color: yellow">  44                  Object attributeValue = annotationAttribute.getValue();</span><br>         201:  <span style="background-color: yellow">  44                  if (nullSafeEquals(attributeValue, getDefaultValue(annotation, attributeName))) {</span><br>         202:  <span style="background-color: yellow">  35                      attributeNamesToIgnore.add(attributeName);</span><br>         203:  <span style="background-color: yellow">                      }</span><br>         204:  <span style="background-color: yellow">                  }</span><br>         205:  <span style="background-color: yellow">                  // extends the ignored list</span><br>         206:  <span style="background-color: yellow">  11              actualIgnoreAttributeNames = attributeNamesToIgnore.toArray(new String[attributeNamesToIgnore.size()]);</span><br>         207:  <span style="background-color: yellow">              }</span><br>         208:  <span style="background-color: yellow">      </span><br>         209:  <span style="background-color: yellow">  22          return getAttributes(annotationAttributes, propertyResolver, actualIgnoreAttributeNames);</span><br>         210:  <span style="background-color: yellow">          }</span><br>         211:  <span style="background-color: white">      </span><br>         212:  <span style="background-color: white">          /**</span><br>         213:  <span style="background-color: white">           * Get the {@link Annotation} attributes</span><br>         214:  <span style="background-color: white">           *</span><br>         215:  <span style="background-color: white">           * @param annotationAttributes the attributes of specified {@link Annotation}</span><br>         216:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>         217:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         218:  <span style="background-color: white">           * @return non-null</span><br>         219:  <span style="background-color: white">           * @since 1.0.4</span><br>         220:  <span style="background-color: white">           */</span><br>         221:  <span style="background-color: white">  22      public static Map
       <string, object>
         getAttributes(Map
        <string, object>
          annotationAttributes,
        </string,>
       </string,></span><br>         222:  <span style="background-color: white">                                                          PropertyResolver propertyResolver, String... ignoreAttributeNames) {</span><br>         223:  <span style="background-color: white">      </span><br>         224:  <span style="background-color: white">  22          Set
       <string>
         ignoreAttributeNamesSet = new HashSet
        <string>
         (arrayToList(ignoreAttributeNames));
        </string>
       </string></span><br>         225:  <span style="background-color: white">      </span><br>         226:  <span style="background-color: white">  22          Map
       <string, object>
         actualAttributes = new LinkedHashMap
        <string, object>
         ();
        </string,>
       </string,></span><br>         227:  <span style="background-color: white">      </span><br>         228:  <span style="background-color: white">  22          for (Map.Entry
       <string, object>
         annotationAttribute : annotationAttributes.entrySet()) {
       </string,></span><br>         229:  <span style="background-color: white">      </span><br>         230:  <span style="background-color: white">  64              String attributeName = annotationAttribute.getKey();</span><br>         231:  <span style="background-color: white">  64              Object attributeValue = annotationAttribute.getValue();</span><br>         232:  <span style="background-color: white">      </span><br>         233:  <span style="background-color: white">                  // ignore attribute name</span><br>         234:  <span style="background-color: white">  64              if (ignoreAttributeNamesSet.contains(attributeName)) {</span><br>         235:  <span style="background-color: white">  39                  continue;</span><br>         236:  <span style="background-color: white">                  }</span><br>         237:  <span style="background-color: white">      </span><br>         238:  <span style="background-color: white">  25              if (attributeValue instanceof String) {</span><br>         239:  <span style="background-color: white">   9                  attributeValue = resolvePlaceholders(valueOf(attributeValue), propertyResolver);</span><br>         240:  <span style="background-color: white">  16              } else if (attributeValue instanceof String[]) {</span><br>         241:  <span style="background-color: white">  12                  String[] values = (String[]) attributeValue;</span><br>         242:  <span style="background-color: white">  24                  for (int i = 0; i &lt; values.length; i++) {</span><br>         243:  <span style="background-color: white">  12                      values[i] = resolvePlaceholders(values[i], propertyResolver);</span><br>         244:  <span style="background-color: white">                      }</span><br>         245:  <span style="background-color: white">  12                  attributeValue = values;</span><br>         246:  <span style="background-color: white">                  }</span><br>         247:  <span style="background-color: white">  25              actualAttributes.put(attributeName, attributeValue);</span><br>         248:  <span style="background-color: white">              }</span><br>         249:  <span style="background-color: white">  22          return actualAttributes;</span><br>         250:  <span style="background-color: white">          }</span><br>         251:  <span style="background-color: white">      </span><br>         252:  <span style="background-color: white">  21      private static String resolvePlaceholders(String attributeValue, PropertyResolver propertyResolver) {</span><br>         253:  <span style="background-color: white">  21          String resolvedValue = attributeValue;</span><br>         254:  <span style="background-color: white">  21          if (propertyResolver != null) {</span><br>         255:  <span style="background-color: white">  12              resolvedValue = propertyResolver.resolvePlaceholders(resolvedValue);</span><br>         256:  <span style="background-color: white">  12              resolvedValue = trimWhitespace(resolvedValue);</span><br>         257:  <span style="background-color: white">              }</span><br>         258:  <span style="background-color: white">  21          return resolvedValue;</span><br>         259:  <span style="background-color: white">          }</span><br>         260:  <span style="background-color: white">      </span><br>         261:  <span style="background-color: white">          /**</span><br>         262:  <span style="background-color: white">           * Get the attribute value</span><br>         263:  <span style="background-color: white">           *</span><br>         264:  <span style="background-color: white">           * @param annotation    {@link Annotation annotation}</span><br>         265:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>         266:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>         267:  <span style="background-color: white">           * @return the attribute value if found</span><br>         268:  <span style="background-color: white">           * @since 1.0.3</span><br>         269:  <span style="background-color: white">           */</span><br>         270:  <span style="background-color: white">   3      public static 
       <t>
         T getAttribute(Annotation annotation, String attributeName) {
       </t></span><br>         271:  <span style="background-color: white">   3          return getAttribute(org.springframework.core.annotation.AnnotationUtils.getAnnotationAttributes(annotation), attributeName);</span><br>         272:  <span style="background-color: white">          }</span><br>         273:  <span style="background-color: white">      </span><br>         274:  <span style="background-color: white">          /**</span><br>         275:  <span style="background-color: white">           * Get the attribute value</span><br>         276:  <span style="background-color: white">           *</span><br>         277:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>         278:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>         279:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>         280:  <span style="background-color: white">           * @return the attribute value if found</span><br>         281:  <span style="background-color: white">           * @since 1.0.3</span><br>         282:  <span style="background-color: white">           */</span><br>         283:  <span style="background-color: white">   3      public static 
       <t>
         T getAttribute(Map
        <string, object>
          attributes, String attributeName) {
        </string,>
       </t></span><br>         284:  <span style="background-color: white">   3          return getAttribute(attributes, attributeName, false);</span><br>         285:  <span style="background-color: white">          }</span><br>         286:  <span style="background-color: white">      </span><br>         287:  <span style="background-color: white">          /**</span><br>         288:  <span style="background-color: white">           * Get the attribute value the will</span><br>         289:  <span style="background-color: white">           *</span><br>         290:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>         291:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>         292:  <span style="background-color: white">           * @param required      the required attribute or not</span><br>         293:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>         294:  <span style="background-color: white">           * @return the attribute value if found</span><br>         295:  <span style="background-color: white">           * @throws IllegalStateException if attribute value can't be found</span><br>         296:  <span style="background-color: white">           * @since 1.0.6</span><br>         297:  <span style="background-color: white">           */</span><br>         298:  <span style="background-color: white">   7      public static 
       <t>
         T getAttribute(Map
        <string, object>
          attributes, String attributeName, boolean required) {
        </string,>
       </t></span><br>         299:  <span style="background-color: white">   7          T value = getAttribute(attributes, attributeName, null);</span><br>         300:  <span style="background-color: white">   7          if (required &amp;&amp; value == null) {</span><br>         301:  <span style="background-color: white">   0              throw new IllegalStateException("The attribute['" + attributeName + "] is required!");</span><br>         302:  <span style="background-color: white">              }</span><br>         303:  <span style="background-color: white">   7          return value;</span><br>         304:  <span style="background-color: white">          }</span><br>         305:  <span style="background-color: white">      </span><br>         306:  <span style="background-color: white">          /**</span><br>         307:  <span style="background-color: white">           * Get the attribute value with default value</span><br>         308:  <span style="background-color: white">           *</span><br>         309:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>         310:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>         311:  <span style="background-color: white">           * @param defaultValue  the default value of attribute</span><br>         312:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>         313:  <span style="background-color: white">           * @return the attribute value if found</span><br>         314:  <span style="background-color: white">           * @since 1.0.6</span><br>         315:  <span style="background-color: white">           */</span><br>         316:  <span style="background-color: white">  13      public static 
       <t>
         T getAttribute(Map
        <string, object>
          attributes, String attributeName, T defaultValue) {
        </string,>
       </t></span><br>         317:  <span style="background-color: white">  13          T value = (T) attributes.get(attributeName);</span><br>         318:  <span style="background-color: white">  13          return value == null ? defaultValue : value;</span><br>         319:  <span style="background-color: white">          }</span><br>         320:  <span style="background-color: white">      </span><br>         321:  <span style="background-color: white">          /**</span><br>         322:  <span style="background-color: white">           * Get the required attribute value</span><br>         323:  <span style="background-color: white">           *</span><br>         324:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>         325:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>         326:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>         327:  <span style="background-color: white">           * @return the attribute value if found</span><br>         328:  <span style="background-color: white">           * @throws IllegalStateException if attribute value can't be found</span><br>         329:  <span style="background-color: white">           * @since 1.0.6</span><br>         330:  <span style="background-color: white">           */</span><br>         331:  <span style="background-color: white">   4      public static 
       <t>
         T getRequiredAttribute(Map
        <string, object>
          attributes, String attributeName) {
        </string,>
       </t></span><br>         332:  <span style="background-color: white">   4          return getAttribute(attributes, attributeName, true);</span><br>         333:  <span style="background-color: white">          }</span><br>         334:  <span style="background-color: white">      </span><br>         335:  <span style="background-color: white">          /**</span><br>         336:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>         337:  <span style="background-color: white">           *</span><br>         338:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>         339:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         340:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         341:  <span style="background-color: white">           * @return non-null</span><br>         342:  <span style="background-color: white">           * @see #getAnnotationAttributes(Annotation, PropertyResolver, boolean, String...)</span><br>         343:  <span style="background-color: white">           * @since 1.0.3</span><br>         344:  <span style="background-color: white">           */</span><br>         345:  <span style="background-color: white">   2      public static AnnotationAttributes getAnnotationAttributes(Annotation annotation, boolean ignoreDefaultValue,</span><br>         346:  <span style="background-color: white">                                                                     String... ignoreAttributeNames) {</span><br>         347:  <span style="background-color: white">   2          return getAnnotationAttributes(annotation, null, ignoreDefaultValue, ignoreAttributeNames);</span><br>         348:  <span style="background-color: white">          }</span><br>         349:  <span style="background-color: white">      </span><br>         350:  <span style="background-color: white">          /**</span><br>         351:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>         352:  <span style="background-color: white">           *</span><br>         353:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>         354:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>         355:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         356:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         357:  <span style="background-color: white">           * @return non-null</span><br>         358:  <span style="background-color: white">           * @see #getAttributes(Annotation, PropertyResolver, boolean, String...)</span><br>         359:  <span style="background-color: white">           * @see #getAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, String...)</span><br>         360:  <span style="background-color: white">           * @since 1.0.3</span><br>         361:  <span style="background-color: white">           */</span><br>         362:  <span style="background-color: white">  15      public static AnnotationAttributes getAnnotationAttributes(Annotation annotation, PropertyResolver propertyResolver,</span><br>         363:  <span style="background-color: yellow">                                                                     boolean ignoreDefaultValue, String... ignoreAttributeNames) {</span><br>         364:  <span style="background-color: white">  15          return fromMap(getAttributes(annotation, propertyResolver, ignoreDefaultValue, ignoreAttributeNames));</span><br>         365:  <span style="background-color: white">          }</span><br>         366:  <span style="background-color: white">      </span><br>         367:  <span style="background-color: white">          /**</span><br>         368:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>         369:  <span style="background-color: white">           *</span><br>         370:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>         371:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>         372:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>         373:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         374:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         375:  <span style="background-color: white">           * @return if <code>annotatedElement</code> can't be found in <code>annotatedElement</code>, return <code>null</code></span><br>         376:  <span style="background-color: white">           * @since 1.0.3</span><br>         377:  <span style="background-color: white">           */</span><br>         378:  <span style="background-color: white"> 99+      public static AnnotationAttributes getAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>         379:  <span style="background-color: white">                                                                     Class<!--? extends Annotation--> annotationType,</span><br>         380:  <span style="background-color: white">                                                                     PropertyResolver propertyResolver,</span><br>         381:  <span style="background-color: white">                                                                     boolean ignoreDefaultValue,</span><br>         382:  <span style="background-color: white">                                                                     String... ignoreAttributeNames) {</span><br>         383:  <span style="background-color: white"> 99+          Annotation annotation = annotatedElement.getAnnotation(annotationType);</span><br>         384:  <span style="background-color: yellow"> 99+          return annotation == null ? null : getAnnotationAttributes(annotation, propertyResolver, ignoreDefaultValue, ignoreAttributeNames);</span><br>         385:  <span style="background-color: white">          }</span><br>         386:  <span style="background-color: white">      </span><br>         387:  <span style="background-color: white">          /**</span><br>         388:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}, if the argument <code>tryMergedAnnotation</code> is <code>true</code>,</span><br>         389:  <span style="background-color: white">           * the {@link AnnotationAttributes} will be got from</span><br>         390:  <span style="background-color: white">           * {@link #tryGetMergedAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, String...) merged annotation} first,</span><br>         391:  <span style="background-color: white">           * if failed, and then to get from</span><br>         392:  <span style="background-color: white">           * {@link #getAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, boolean, String...) normal one}</span><br>         393:  <span style="background-color: white">           *</span><br>         394:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>         395:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>         396:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>         397:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         398:  <span style="background-color: white">           * @param tryMergedAnnotation  whether try merged annotation or not</span><br>         399:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         400:  <span style="background-color: white">           * @return if <code>annotatedElement</code> can't be found in <code>annotatedElement</code>, return <code>null</code></span><br>         401:  <span style="background-color: white">           * @since 1.0.3</span><br>         402:  <span style="background-color: white">           */</span><br>         403:  <span style="background-color: white"> 99+      public static AnnotationAttributes getAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>         404:  <span style="background-color: white">                                                                     Class<!--? extends Annotation--> annotationType,</span><br>         405:  <span style="background-color: white">                                                                     PropertyResolver propertyResolver,</span><br>         406:  <span style="background-color: white">                                                                     boolean ignoreDefaultValue,</span><br>         407:  <span style="background-color: white">                                                                     boolean tryMergedAnnotation,</span><br>         408:  <span style="background-color: white">                                                                     String... ignoreAttributeNames) {</span><br>         409:  <span style="background-color: white"> 99+          AnnotationAttributes attributes = null;</span><br>         410:  <span style="background-color: white">      </span><br>         411:  <span style="background-color: white"> 99+          if (tryMergedAnnotation) {</span><br>         412:  <span style="background-color: white"> 99+              attributes = tryGetMergedAnnotationAttributes(annotatedElement, annotationType, propertyResolver, ignoreDefaultValue, ignoreAttributeNames);</span><br>         413:  <span style="background-color: white">              }</span><br>         414:  <span style="background-color: white">      </span><br>         415:  <span style="background-color: white"> 99+          if (attributes == null) {</span><br>         416:  <span style="background-color: white"> 99+              attributes = getAnnotationAttributes(annotatedElement, annotationType, propertyResolver, ignoreDefaultValue, ignoreAttributeNames);</span><br>         417:  <span style="background-color: white">              }</span><br>         418:  <span style="background-color: white">      </span><br>         419:  <span style="background-color: white"> 99+          return attributes;</span><br>         420:  <span style="background-color: white">          }</span><br>         421:  <span style="background-color: white">      </span><br>         422:  <span style="background-color: white">          /**</span><br>         423:  <span style="background-color: white">           * Try to get the merged {@link Annotation annotation}</span><br>         424:  <span style="background-color: white">           *</span><br>         425:  <span style="background-color: white">           * @param annotatedElement {@link AnnotatedElement the annotated element}</span><br>         426:  <span style="background-color: white">           * @param annotationType   the {@link Class tyoe} pf {@link Annotation annotation}</span><br>         427:  <span style="background-color: white">           * @return If current version of Spring Framework is below 4.2, return <code>null</code></span><br>         428:  <span style="background-color: white">           * @since 1.0.3</span><br>         429:  <span style="background-color: white">           */</span><br>         430:  <span style="background-color: white"> 99+      public static Annotation tryGetMergedAnnotation(AnnotatedElement annotatedElement,</span><br>         431:  <span style="background-color: white">                                                          Class<!--? extends Annotation--> annotationType) {</span><br>         432:  <span style="background-color: white">      </span><br>         433:  <span style="background-color: white"> 99+          Annotation mergedAnnotation = null;</span><br>         434:  <span style="background-color: white">      </span><br>         435:  <span style="background-color: white"> 99+          ClassLoader classLoader = annotationType.getClassLoader();</span><br>         436:  <span style="background-color: white">      </span><br>         437:  <span style="background-color: white"> 99+          if (ClassUtils.isPresent(ANNOTATED_ELEMENT_UTILS_CLASS_NAME, classLoader)) {</span><br>         438:  <span style="background-color: white">   0              Class<!--?--> annotatedElementUtilsClass = resolveClassName(ANNOTATED_ELEMENT_UTILS_CLASS_NAME, classLoader);</span><br>         439:  <span style="background-color: white">                  // getMergedAnnotation method appears in the Spring Framework 4.2</span><br>         440:  <span style="background-color: white">   0              Method getMergedAnnotationMethod = findMethod(annotatedElementUtilsClass, "getMergedAnnotation", AnnotatedElement.class, Class.class);</span><br>         441:  <span style="background-color: white">   0              if (getMergedAnnotationMethod != null) {</span><br>         442:  <span style="background-color: white">   0                  mergedAnnotation = (Annotation) invokeMethod(getMergedAnnotationMethod, null, annotatedElement, annotationType);</span><br>         443:  <span style="background-color: white">                  }</span><br>         444:  <span style="background-color: white">              }</span><br>         445:  <span style="background-color: white">      </span><br>         446:  <span style="background-color: white"> 99+          return mergedAnnotation;</span><br>         447:  <span style="background-color: white">          }</span><br>         448:  <span style="background-color: white">      </span><br>         449:  <span style="background-color: white">          /**</span><br>         450:  <span style="background-color: white">           * Try to get {@link AnnotationAttributes the annotation attributes} after merging and resolving the placeholders</span><br>         451:  <span style="background-color: white">           *</span><br>         452:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>         453:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>         454:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>         455:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>         456:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>         457:  <span style="background-color: white">           * @return If the specified annotation type is not found, return <code>null</code></span><br>         458:  <span style="background-color: white">           * @since 1.0.3</span><br>         459:  <span style="background-color: white">           */</span><br>         460:  <span style="background-color: yellow"> 99+      public static AnnotationAttributes tryGetMergedAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>         461:  <span style="background-color: yellow">                                                                              Class<!--? extends Annotation--> annotationType,</span><br>         462:  <span style="background-color: yellow">                                                                              PropertyResolver propertyResolver,</span><br>         463:  <span style="background-color: yellow">                                                                              boolean ignoreDefaultValue,</span><br>         464:  <span style="background-color: yellow">                                                                              String... ignoreAttributeNames) {</span><br>         465:  <span style="background-color: white"> 99+          Annotation annotation = tryGetMergedAnnotation(annotatedElement, annotationType);</span><br>         466:  <span style="background-color: yellow"> 99+          return annotation == null ? null : getAnnotationAttributes(annotation, propertyResolver, ignoreDefaultValue, ignoreAttributeNames);</span><br>         467:  <span style="background-color: white">          }</span><br>         468:  <span style="background-color: white">      </span><br>         469:  <span style="background-color: white">      </span><br>         470:  <span style="background-color: white">      }</span><br></pre> </code> 
   </div> 
   <div class="column"> 
    <h2>Patched Code:</h2> <code> <pre id="patched-trace">        1-&gt;N:  <span style="background-color: white">      package com.alibaba.spring.util;</span><br>        2-&gt;N:  <span style="background-color: white">      </span><br>        3-&gt;N:  <span style="background-color: white">      import org.springframework.core.annotation.AnnotationAttributes;</span><br>        4-&gt;N:  <span style="background-color: white">      import org.springframework.core.env.Environment;</span><br>        5-&gt;N:  <span style="background-color: white">      import org.springframework.core.env.PropertyResolver;</span><br>        6-&gt;N:  <span style="background-color: white">      import org.springframework.util.ClassUtils;</span><br>        7-&gt;N:  <span style="background-color: white">      </span><br>        8-&gt;N:  <span style="background-color: white">      import java.lang.annotation.Annotation;</span><br>        9-&gt;N:  <span style="background-color: white">      import java.lang.annotation.ElementType;</span><br>       10-&gt;N:  <span style="background-color: white">      import java.lang.annotation.Retention;</span><br>       11-&gt;N:  <span style="background-color: white">      import java.lang.annotation.RetentionPolicy;</span><br>       12-&gt;N:  <span style="background-color: white">      import java.lang.annotation.Target;</span><br>       13-&gt;N:  <span style="background-color: white">      import java.lang.reflect.AnnotatedElement;</span><br>       14-&gt;N:  <span style="background-color: white">      import java.lang.reflect.Method;</span><br>       15-&gt;N:  <span style="background-color: white">      import java.util.Collections;</span><br>       16-&gt;N:  <span style="background-color: white">      import java.util.HashSet;</span><br>       17-&gt;N:  <span style="background-color: white">      import java.util.LinkedHashMap;</span><br>       18-&gt;N:  <span style="background-color: white">      import java.util.LinkedList;</span><br>       19-&gt;N:  <span style="background-color: white">      import java.util.List;</span><br>       20-&gt;N:  <span style="background-color: white">      import java.util.Map;</span><br>       21-&gt;N:  <span style="background-color: white">      import java.util.Set;</span><br>       22-&gt;N:  <span style="background-color: white">      </span><br>       23-&gt;N:  <span style="background-color: white">      import static java.lang.String.valueOf;</span><br>       24-&gt;N:  <span style="background-color: white">      import static java.util.Arrays.asList;</span><br>       25-&gt;N:  <span style="background-color: white">      import static org.springframework.core.annotation.AnnotationAttributes.fromMap;</span><br>       26-&gt;N:  <span style="background-color: white">      import static org.springframework.core.annotation.AnnotationUtils.findAnnotation;</span><br>       27-&gt;N:  <span style="background-color: white">      import static org.springframework.core.annotation.AnnotationUtils.getDefaultValue;</span><br>       28-&gt;N:  <span style="background-color: white">      import static org.springframework.util.ClassUtils.resolveClassName;</span><br>       29-&gt;N:  <span style="background-color: white">      import static org.springframework.util.CollectionUtils.arrayToList;</span><br>       30-&gt;N:  <span style="background-color: white">      import static org.springframework.util.CollectionUtils.isEmpty;</span><br>       31-&gt;N:  <span style="background-color: white">      import static org.springframework.util.ObjectUtils.nullSafeEquals;</span><br>       32-&gt;N:  <span style="background-color: white">      import static org.springframework.util.ReflectionUtils.findMethod;</span><br>       33-&gt;N:  <span style="background-color: white">      import static org.springframework.util.ReflectionUtils.invokeMethod;</span><br>       34-&gt;N:  <span style="background-color: white">      import static org.springframework.util.StringUtils.trimWhitespace;</span><br>       35-&gt;N:  <span style="background-color: white">      </span><br>       36-&gt;N:  <span style="background-color: white">      /**</span><br>       37-&gt;N:  <span style="background-color: white">       * {@link Annotation} Utilities</span><br>       38-&gt;N:  <span style="background-color: white">       *</span><br>       39-&gt;N:  <span style="background-color: white">       * @author <a href="mailto:mercyblitz@gmail.com">Mercy</a></span><br>       40-&gt;N:  <span style="background-color: white">       * @see Annotation</span><br>       41-&gt;N:  <span style="background-color: white">       * @since 2017.01.13</span><br>       42-&gt;N:  <span style="background-color: white">       */</span><br>      43-&gt;43:  <span style="background-color: white">      @SuppressWarnings("unchecked")</span><br>       44-&gt;N:  <span style="background-color: white">      public abstract class AnnotationUtils {</span><br>       45-&gt;N:  <span style="background-color: white">      </span><br>       46-&gt;N:  <span style="background-color: white">          /**</span><br>       47-&gt;N:  <span style="background-color: white">           * The class name of AnnotatedElementUtils that is introduced since Spring Framework 4</span><br>       48-&gt;N:  <span style="background-color: white">           */</span><br>      49-&gt;49:  <span style="background-color: white">          public static final String ANNOTATED_ELEMENT_UTILS_CLASS_NAME = "org.springframework.core.annotation.AnnotatedElementUtils";</span><br>       50-&gt;N:  <span style="background-color: white">      </span><br>       51-&gt;N:  <span style="background-color: white">          /**</span><br>       52-&gt;N:  <span style="background-color: white">           * Is specified {@link Annotation} present on {@link Method}'s declaring class or parameters or itself.</span><br>       53-&gt;N:  <span style="background-color: white">           *</span><br>       54-&gt;N:  <span style="background-color: white">           * @param method          {@link Method}</span><br>       55-&gt;N:  <span style="background-color: white">           * @param annotationClass {@link Annotation} type</span><br>       56-&gt;N:  <span style="background-color: white">           * @param <a>             {@link Annotation} type</a></span><br>       57-&gt;N:  <span style="background-color: white">           * @return If present , return <code>true</code> , or <code>false</code></span><br>       58-&gt;N:  <span style="background-color: white">           */</span><br>      59-&gt;59:  <span style="background-color: white">   5      public static <a extends annotation> boolean isPresent(Method method, Class</a><a> annotationClass) {</a></span><br>       60-&gt;N:  <span style="background-color: white">      </span><br>      61-&gt;61:  <span style="background-color: white">   5          Map
       <elementtype, list<a>
        &gt; annotationsMap = findAnnotations(method, annotationClass);
       </elementtype,></span><br>       62-&gt;N:  <span style="background-color: white">      </span><br>      63-&gt;63:  <span style="background-color: white">   5          return !annotationsMap.isEmpty();</span><br>       64-&gt;N:  <span style="background-color: white">      </span><br>       65-&gt;N:  <span style="background-color: white">          }</span><br>       66-&gt;N:  <span style="background-color: white">      </span><br>       67-&gt;N:  <span style="background-color: white">          /**</span><br>       68-&gt;N:  <span style="background-color: white">           * Find specified {@link Annotation} type maps from {@link Method}</span><br>       69-&gt;N:  <span style="background-color: white">           *</span><br>       70-&gt;N:  <span style="background-color: white">           * @param method          {@link Method}</span><br>       71-&gt;N:  <span style="background-color: white">           * @param annotationClass {@link Annotation} type</span><br>       72-&gt;N:  <span style="background-color: white">           * @param <a>             {@link Annotation} type</a></span><br>       73-&gt;N:  <span style="background-color: white">           * @return {@link Annotation} type maps , the {@link ElementType} as key ,</span><br>       74-&gt;N:  <span style="background-color: white">           * the list of {@link Annotation} as value.</span><br>       75-&gt;N:  <span style="background-color: white">           * If {@link Annotation} was annotated on {@link Method}'s parameters{@link ElementType#PARAMETER} ,</span><br>       76-&gt;N:  <span style="background-color: white">           * the associated {@link Annotation} list may contain multiple elements.</span><br>       77-&gt;N:  <span style="background-color: white">           */</span><br>      78-&gt;78:  <span style="background-color: white">   8      public static <a extends annotation> Map
        <elementtype, list<a>
         &gt; findAnnotations(Method method,
        </elementtype,></a></span><br>      79-&gt;79:  <span style="background-color: white">                                                                                         Class<a> annotationClass) {</a></span><br>       80-&gt;N:  <span style="background-color: white">      </span><br>      81-&gt;81:  <span style="background-color: white">   8          Retention retention = annotationClass.getAnnotation(Retention.class);</span><br>       82-&gt;N:  <span style="background-color: white">      </span><br>      83-&gt;83:  <span style="background-color: white">   8          RetentionPolicy retentionPolicy = retention.value();</span><br>       84-&gt;N:  <span style="background-color: white">      </span><br>      85-&gt;85:  <span style="background-color: white">   8          if (!RetentionPolicy.RUNTIME.equals(retentionPolicy)) {</span><br>      86-&gt;86:  <span style="background-color: white">   2              return Collections.emptyMap();</span><br>       87-&gt;N:  <span style="background-color: white">              }</span><br>       88-&gt;N:  <span style="background-color: white">      </span><br>      89-&gt;89:  <span style="background-color: white">   6          Map
       <elementtype, list<a>
        &gt; annotationsMap = new LinkedHashMap
        <elementtype, list<a>
         &gt;();
        </elementtype,>
       </elementtype,></span><br>       90-&gt;N:  <span style="background-color: white">      </span><br>      91-&gt;91:  <span style="background-color: white">   6          Target target = annotationClass.getAnnotation(Target.class);</span><br>       92-&gt;N:  <span style="background-color: white">      </span><br>      93-&gt;93:  <span style="background-color: white">   6          ElementType[] elementTypes = target.value();</span><br>       94-&gt;N:  <span style="background-color: white">      </span><br>       95-&gt;N:  <span style="background-color: white">      </span><br>      96-&gt;96:  <span style="background-color: white">   6          for (ElementType elementType : elementTypes) {</span><br>       97-&gt;N:  <span style="background-color: white">      </span><br>      98-&gt;98:  <span style="background-color: white">  18              List<a> annotationsList = new LinkedList</a><a>();</a></span><br>       99-&gt;N:  <span style="background-color: white">      </span><br>    100-&gt;100:  <span style="background-color: white">  18              switch (elementType) {</span><br>      101-&gt;N:  <span style="background-color: white">      </span><br>    102-&gt;102:  <span style="background-color: white">   6                  case PARAMETER:</span><br>      103-&gt;N:  <span style="background-color: white">      </span><br>    104-&gt;104:  <span style="background-color: white">   6                      Annotation[][] parameterAnnotations = method.getParameterAnnotations();</span><br>      105-&gt;N:  <span style="background-color: white">      </span><br>    106-&gt;106:  <span style="background-color: white">   6                      for (Annotation[] annotations : parameterAnnotations) {</span><br>      107-&gt;N:  <span style="background-color: white">      </span><br>    108-&gt;108:  <span style="background-color: white">   6                          for (Annotation annotation : annotations) {</span><br>      109-&gt;N:  <span style="background-color: white">      </span><br>    110-&gt;110:  <span style="background-color: white">   5                              if (annotationClass.equals(annotation.annotationType())) {</span><br>      111-&gt;N:  <span style="background-color: white">      </span><br>    112-&gt;112:  <span style="background-color: white">   5                                  annotationsList.add((A) annotation);</span><br>      113-&gt;N:  <span style="background-color: white">      </span><br>      114-&gt;N:  <span style="background-color: white">                                  }</span><br>      115-&gt;N:  <span style="background-color: white">      </span><br>      116-&gt;N:  <span style="background-color: white">                              }</span><br>      117-&gt;N:  <span style="background-color: white">      </span><br>      118-&gt;N:  <span style="background-color: white">                          }</span><br>      119-&gt;N:  <span style="background-color: white">      </span><br>    120-&gt;120:  <span style="background-color: white">   6                      break;</span><br>      121-&gt;N:  <span style="background-color: white">      </span><br>    122-&gt;122:  <span style="background-color: white">   6                  case METHOD:</span><br>      123-&gt;N:  <span style="background-color: white">      </span><br>    124-&gt;124:  <span style="background-color: white">   6                      A annotation = findAnnotation(method, annotationClass);</span><br>      125-&gt;N:  <span style="background-color: white">      </span><br>    126-&gt;126:  <span style="background-color: white">   6                      if (annotation != null) {</span><br>      127-&gt;N:  <span style="background-color: white">      </span><br>    128-&gt;128:  <span style="background-color: white">   5                          annotationsList.add(annotation);</span><br>      129-&gt;N:  <span style="background-color: white">      </span><br>      130-&gt;N:  <span style="background-color: white">                          }</span><br>      131-&gt;N:  <span style="background-color: white">      </span><br>    132-&gt;132:  <span style="background-color: white">   6                      break;</span><br>      133-&gt;N:  <span style="background-color: white">      </span><br>    134-&gt;134:  <span style="background-color: white">   6                  case TYPE:</span><br>      135-&gt;N:  <span style="background-color: white">      </span><br>    136-&gt;136:  <span style="background-color: white">   6                      Class<!--?--> beanType = method.getDeclaringClass();</span><br>      137-&gt;N:  <span style="background-color: white">      </span><br>    138-&gt;138:  <span style="background-color: white">   6                      A annotation2 = findAnnotation(beanType, annotationClass);</span><br>      139-&gt;N:  <span style="background-color: white">      </span><br>    140-&gt;140:  <span style="background-color: white">   6                      if (annotation2 != null) {</span><br>      141-&gt;N:  <span style="background-color: white">      </span><br>    142-&gt;142:  <span style="background-color: white">   5                          annotationsList.add(annotation2);</span><br>      143-&gt;N:  <span style="background-color: white">      </span><br>      144-&gt;N:  <span style="background-color: white">                          }</span><br>      145-&gt;N:  <span style="background-color: white">      </span><br>    146-&gt;146:  <span style="background-color: white">   6                      break;</span><br>      147-&gt;N:  <span style="background-color: white">      </span><br>      148-&gt;N:  <span style="background-color: white">                  }</span><br>      149-&gt;N:  <span style="background-color: white">      </span><br>    150-&gt;150:  <span style="background-color: white">  18              if (!annotationsList.isEmpty()) {</span><br>      151-&gt;N:  <span style="background-color: white">      </span><br>    152-&gt;152:  <span style="background-color: white">  13                  annotationsMap.put(elementType, annotationsList);</span><br>      153-&gt;N:  <span style="background-color: white">      </span><br>      154-&gt;N:  <span style="background-color: white">                  }</span><br>      155-&gt;N:  <span style="background-color: white">      </span><br>      156-&gt;N:  <span style="background-color: white">      </span><br>      157-&gt;N:  <span style="background-color: white">              }</span><br>      158-&gt;N:  <span style="background-color: white">      </span><br>    159-&gt;159:  <span style="background-color: white">   6          return Collections.unmodifiableMap(annotationsMap);</span><br>      160-&gt;N:  <span style="background-color: white">      </span><br>      161-&gt;N:  <span style="background-color: white">          }</span><br>      162-&gt;N:  <span style="background-color: white">      </span><br>      163-&gt;N:  <span style="background-color: white">          /**</span><br>      164-&gt;N:  <span style="background-color: white">           * Get the {@link Annotation} attributes</span><br>      165-&gt;N:  <span style="background-color: white">           *</span><br>      166-&gt;N:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>      167-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      168-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      169-&gt;N:  <span style="background-color: white">           * @return non-null</span><br>      170-&gt;N:  <span style="background-color: white">           * @since 1.0.2</span><br>      171-&gt;N:  <span style="background-color: white">           */</span><br>    172-&gt;172:  <span style="background-color: white">   4      public static Map
       <string, object>
         getAttributes(Annotation annotation, boolean ignoreDefaultValue,
       </string,></span><br>    173-&gt;173:  <span style="background-color: white">                                                          String... ignoreAttributeNames) {</span><br>    174-&gt;174:  <span style="background-color: white">   4          return getAttributes(annotation, null, ignoreDefaultValue, ignoreAttributeNames);</span><br>      175-&gt;N:  <span style="background-color: white">          }</span><br>      176-&gt;N:  <span style="background-color: white">      </span><br>      177-&gt;N:  <span style="background-color: white">          /**</span><br>      178-&gt;N:  <span style="background-color: white">           * Get the {@link Annotation} attributes</span><br>      179-&gt;N:  <span style="background-color: white">           *</span><br>      180-&gt;N:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>      181-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      182-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      183-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      184-&gt;N:  <span style="background-color: white">           * @return non-null</span><br>      185-&gt;N:  <span style="background-color: white">           * @since 1.0.2</span><br>      186-&gt;N:  <span style="background-color: white">           */</span><br>      187-&gt;U:  <span style="background-color: yellow">   7      public static Map
       <string, object>
         getAttributes(Annotation annotation, PropertyResolver propertyResolver,
       </string,></span><br>      188-&gt;U:  <span style="background-color: yellow">                                                          boolean ignoreDefaultValue, String... ignoreAttributeNames) {</span><br>      189-&gt;U:  <span style="background-color: yellow">   7          return getAttributes(annotation, propertyResolver, false, false, ignoreDefaultValue, ignoreAttributeNames);</span><br>      190-&gt;U:  <span style="background-color: yellow">          }</span><br>      191-&gt;N:  <span style="background-color: white">      </span><br>      192-&gt;N:  <span style="background-color: white">          /**</span><br>      193-&gt;N:  <span style="background-color: white">           * Get the {@link Annotation} attributes</span><br>      194-&gt;N:  <span style="background-color: white">           *</span><br>      195-&gt;N:  <span style="background-color: white">           * @param annotationAttributes the attributes of specified {@link Annotation}</span><br>      196-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      197-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      198-&gt;N:  <span style="background-color: white">           * @return non-null</span><br>      199-&gt;N:  <span style="background-color: white">           * @since 1.0.4</span><br>      200-&gt;N:  <span style="background-color: white">           */</span><br>    201-&gt;221:  <span style="background-color: white">  22      public static Map
       <string, object>
         getAttributes(Map
        <string, object>
          annotationAttributes,
        </string,>
       </string,></span><br>    202-&gt;222:  <span style="background-color: white">                                                          PropertyResolver propertyResolver, String... ignoreAttributeNames) {</span><br>      203-&gt;N:  <span style="background-color: white">      </span><br>    204-&gt;224:  <span style="background-color: white">  22          Set
       <string>
         ignoreAttributeNamesSet = new HashSet
        <string>
         (arrayToList(ignoreAttributeNames));
        </string>
       </string></span><br>      205-&gt;N:  <span style="background-color: white">      </span><br>    206-&gt;226:  <span style="background-color: white">  22          Map
       <string, object>
         actualAttributes = new LinkedHashMap
        <string, object>
         ();
        </string,>
       </string,></span><br>      207-&gt;N:  <span style="background-color: white">      </span><br>    208-&gt;228:  <span style="background-color: white">  22          for (Map.Entry
       <string, object>
         annotationAttribute : annotationAttributes.entrySet()) {
       </string,></span><br>      209-&gt;N:  <span style="background-color: white">      </span><br>    210-&gt;230:  <span style="background-color: white">  64              String attributeName = annotationAttribute.getKey();</span><br>    211-&gt;231:  <span style="background-color: white">  64              Object attributeValue = annotationAttribute.getValue();</span><br>      212-&gt;N:  <span style="background-color: white">      </span><br>      213-&gt;N:  <span style="background-color: white">                  // ignore attribute name</span><br>    214-&gt;234:  <span style="background-color: white">  64              if (ignoreAttributeNamesSet.contains(attributeName)) {</span><br>    215-&gt;235:  <span style="background-color: white">  39                  continue;</span><br>      216-&gt;N:  <span style="background-color: white">                  }</span><br>      217-&gt;N:  <span style="background-color: white">      </span><br>    218-&gt;238:  <span style="background-color: white">  25              if (attributeValue instanceof String) {</span><br>    219-&gt;239:  <span style="background-color: white">   9                  attributeValue = resolvePlaceholders(valueOf(attributeValue), propertyResolver);</span><br>    220-&gt;240:  <span style="background-color: white">  16              } else if (attributeValue instanceof String[]) {</span><br>    221-&gt;241:  <span style="background-color: white">  12                  String[] values = (String[]) attributeValue;</span><br>    222-&gt;242:  <span style="background-color: white">  24                  for (int i = 0; i &lt; values.length; i++) {</span><br>    223-&gt;243:  <span style="background-color: white">  12                      values[i] = resolvePlaceholders(values[i], propertyResolver);</span><br>      224-&gt;N:  <span style="background-color: white">                      }</span><br>    225-&gt;245:  <span style="background-color: white">  12                  attributeValue = values;</span><br>      226-&gt;N:  <span style="background-color: white">                  }</span><br>    227-&gt;247:  <span style="background-color: white">  25              actualAttributes.put(attributeName, attributeValue);</span><br>      228-&gt;N:  <span style="background-color: white">              }</span><br>    229-&gt;249:  <span style="background-color: white">  22          return actualAttributes;</span><br>      230-&gt;N:  <span style="background-color: white">          }</span><br>      231-&gt;N:  <span style="background-color: white">      </span><br>      232-&gt;N:  <span style="background-color: white">          /**</span><br>      233-&gt;N:  <span style="background-color: white">           * @param annotation             specified {@link Annotation}</span><br>      234-&gt;N:  <span style="background-color: white">           * @param propertyResolver       {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      235-&gt;N:  <span style="background-color: white">           * @param classValuesAsString    whether to turn Class references into Strings (for</span><br>      236-&gt;N:  <span style="background-color: white">           *                               compatibility with {@link org.springframework.core.type.AnnotationMetadata} or to</span><br>      237-&gt;N:  <span style="background-color: white">           *                               preserve them as Class references</span><br>      238-&gt;N:  <span style="background-color: white">           * @param nestedAnnotationsAsMap whether to turn nested Annotation instances into</span><br>      239-&gt;N:  <span style="background-color: white">           *                               {@link AnnotationAttributes} maps (for compatibility with</span><br>      240-&gt;N:  <span style="background-color: white">           *                               {@link org.springframework.core.type.AnnotationMetadata} or to preserve them as</span><br>      241-&gt;N:  <span style="background-color: white">           *                               Annotation instances</span><br>      242-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue     whether ignore default value or not</span><br>      243-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames   the attribute names of annotation should be ignored</span><br>      244-&gt;N:  <span style="background-color: white">           * @return</span><br>      245-&gt;N:  <span style="background-color: white">           * @since 1.0.11</span><br>      246-&gt;N:  <span style="background-color: white">           */</span><br>      247-&gt;U:  <span style="background-color: yellow">  22      public static Map
       <string, object>
         getAttributes(Annotation annotation,
       </string,></span><br>      248-&gt;U:  <span style="background-color: yellow">                                                          PropertyResolver propertyResolver,</span><br>      249-&gt;U:  <span style="background-color: yellow">                                                          boolean classValuesAsString,</span><br>      250-&gt;U:  <span style="background-color: yellow">                                                          boolean nestedAnnotationsAsMap,</span><br>      251-&gt;U:  <span style="background-color: yellow">                                                          boolean ignoreDefaultValue,</span><br>      252-&gt;U:  <span style="background-color: yellow">                                                          String... ignoreAttributeNames) {</span><br>      253-&gt;U:  <span style="background-color: yellow">      </span><br>      254-&gt;U:  <span style="background-color: yellow">  22          Map
       <string, object>
         annotationAttributes = org.springframework.core.annotation.AnnotationUtils.getAnnotationAttributes(annotation, classValuesAsString, nestedAnnotationsAsMap);
       </string,></span><br>      255-&gt;U:  <span style="background-color: yellow">      </span><br>      256-&gt;U:  <span style="background-color: yellow">  22          String[] actualIgnoreAttributeNames = ignoreAttributeNames;</span><br>      257-&gt;U:  <span style="background-color: yellow">      </span><br>      258-&gt;U:  <span style="background-color: yellow">  22          if (ignoreDefaultValue &amp;&amp; !isEmpty(annotationAttributes)) {</span><br>      259-&gt;U:  <span style="background-color: yellow">      </span><br>      260-&gt;U:  <span style="background-color: yellow">  11              List
       <string>
         attributeNamesToIgnore = new LinkedList
        <string>
         (asList(ignoreAttributeNames));
        </string>
       </string></span><br>      261-&gt;U:  <span style="background-color: yellow">      </span><br>      262-&gt;U:  <span style="background-color: yellow">  11              for (Map.Entry
       <string, object>
         annotationAttribute : annotationAttributes.entrySet()) {
       </string,></span><br>      263-&gt;U:  <span style="background-color: yellow">  44                  String attributeName = annotationAttribute.getKey();</span><br>      264-&gt;U:  <span style="background-color: yellow">  44                  Object attributeValue = annotationAttribute.getValue();</span><br>      265-&gt;U:  <span style="background-color: yellow">  44                  if (nullSafeEquals(attributeValue, getDefaultValue(annotation, attributeName))) {</span><br>      266-&gt;U:  <span style="background-color: yellow">  35                      attributeNamesToIgnore.add(attributeName);</span><br>      267-&gt;U:  <span style="background-color: yellow">                      }</span><br>      268-&gt;U:  <span style="background-color: yellow">                  }</span><br>      269-&gt;U:  <span style="background-color: yellow">                  // extends the ignored list</span><br>      270-&gt;U:  <span style="background-color: yellow">  11              actualIgnoreAttributeNames = attributeNamesToIgnore.toArray(new String[attributeNamesToIgnore.size()]);</span><br>      271-&gt;U:  <span style="background-color: yellow">              }</span><br>      272-&gt;U:  <span style="background-color: yellow">      </span><br>      273-&gt;U:  <span style="background-color: yellow">  22          return getAttributes(annotationAttributes, propertyResolver, actualIgnoreAttributeNames);</span><br>      274-&gt;U:  <span style="background-color: yellow">          }</span><br>      275-&gt;N:  <span style="background-color: white">      </span><br>    276-&gt;252:  <span style="background-color: white">  21      private static String resolvePlaceholders(String attributeValue, PropertyResolver propertyResolver) {</span><br>    277-&gt;253:  <span style="background-color: white">  21          String resolvedValue = attributeValue;</span><br>    278-&gt;254:  <span style="background-color: white">  21          if (propertyResolver != null) {</span><br>    279-&gt;255:  <span style="background-color: white">  12              resolvedValue = propertyResolver.resolvePlaceholders(resolvedValue);</span><br>    280-&gt;256:  <span style="background-color: white">  12              resolvedValue = trimWhitespace(resolvedValue);</span><br>      281-&gt;N:  <span style="background-color: white">              }</span><br>    282-&gt;258:  <span style="background-color: white">  21          return resolvedValue;</span><br>      283-&gt;N:  <span style="background-color: white">          }</span><br>      284-&gt;N:  <span style="background-color: white">      </span><br>      285-&gt;N:  <span style="background-color: white">          /**</span><br>      286-&gt;N:  <span style="background-color: white">           * Get the attribute value</span><br>      287-&gt;N:  <span style="background-color: white">           *</span><br>      288-&gt;N:  <span style="background-color: white">           * @param annotation    {@link Annotation annotation}</span><br>      289-&gt;N:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>      290-&gt;N:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>      291-&gt;N:  <span style="background-color: white">           * @return the attribute value if found</span><br>      292-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      293-&gt;N:  <span style="background-color: white">           */</span><br>    294-&gt;270:  <span style="background-color: white">   3      public static 
       <t>
         T getAttribute(Annotation annotation, String attributeName) {
       </t></span><br>    295-&gt;271:  <span style="background-color: white">   3          return getAttribute(org.springframework.core.annotation.AnnotationUtils.getAnnotationAttributes(annotation), attributeName);</span><br>      296-&gt;N:  <span style="background-color: white">          }</span><br>      297-&gt;N:  <span style="background-color: white">      </span><br>      298-&gt;N:  <span style="background-color: white">          /**</span><br>      299-&gt;N:  <span style="background-color: white">           * Get the attribute value</span><br>      300-&gt;N:  <span style="background-color: white">           *</span><br>      301-&gt;N:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>      302-&gt;N:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>      303-&gt;N:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>      304-&gt;N:  <span style="background-color: white">           * @return the attribute value if found</span><br>      305-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      306-&gt;N:  <span style="background-color: white">           */</span><br>    307-&gt;283:  <span style="background-color: white">   3      public static 
       <t>
         T getAttribute(Map
        <string, object>
          attributes, String attributeName) {
        </string,>
       </t></span><br>    308-&gt;284:  <span style="background-color: white">   3          return getAttribute(attributes, attributeName, false);</span><br>      309-&gt;N:  <span style="background-color: white">          }</span><br>      310-&gt;N:  <span style="background-color: white">      </span><br>      311-&gt;N:  <span style="background-color: white">          /**</span><br>      312-&gt;N:  <span style="background-color: white">           * Get the attribute value the will</span><br>      313-&gt;N:  <span style="background-color: white">           *</span><br>      314-&gt;N:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>      315-&gt;N:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>      316-&gt;N:  <span style="background-color: white">           * @param required      the required attribute or not</span><br>      317-&gt;N:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>      318-&gt;N:  <span style="background-color: white">           * @return the attribute value if found</span><br>      319-&gt;N:  <span style="background-color: white">           * @throws IllegalStateException if attribute value can't be found</span><br>      320-&gt;N:  <span style="background-color: white">           * @since 1.0.6</span><br>      321-&gt;N:  <span style="background-color: white">           */</span><br>    322-&gt;298:  <span style="background-color: white">   7      public static 
       <t>
         T getAttribute(Map
        <string, object>
          attributes, String attributeName, boolean required) {
        </string,>
       </t></span><br>    323-&gt;299:  <span style="background-color: white">   7          T value = getAttribute(attributes, attributeName, null);</span><br>    324-&gt;300:  <span style="background-color: white">   7          if (required &amp;&amp; value == null) {</span><br>    325-&gt;301:  <span style="background-color: white">   0              throw new IllegalStateException("The attribute['" + attributeName + "] is required!");</span><br>      326-&gt;N:  <span style="background-color: white">              }</span><br>    327-&gt;303:  <span style="background-color: white">   7          return value;</span><br>      328-&gt;N:  <span style="background-color: white">          }</span><br>      329-&gt;N:  <span style="background-color: white">      </span><br>      330-&gt;N:  <span style="background-color: white">          /**</span><br>      331-&gt;N:  <span style="background-color: white">           * Get the attribute value with default value</span><br>      332-&gt;N:  <span style="background-color: white">           *</span><br>      333-&gt;N:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>      334-&gt;N:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>      335-&gt;N:  <span style="background-color: white">           * @param defaultValue  the default value of attribute</span><br>      336-&gt;N:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>      337-&gt;N:  <span style="background-color: white">           * @return the attribute value if found</span><br>      338-&gt;N:  <span style="background-color: white">           * @since 1.0.6</span><br>      339-&gt;N:  <span style="background-color: white">           */</span><br>    340-&gt;316:  <span style="background-color: white">  13      public static 
       <t>
         T getAttribute(Map
        <string, object>
          attributes, String attributeName, T defaultValue) {
        </string,>
       </t></span><br>    341-&gt;317:  <span style="background-color: white">  13          T value = (T) attributes.get(attributeName);</span><br>    342-&gt;318:  <span style="background-color: white">  13          return value == null ? defaultValue : value;</span><br>      343-&gt;N:  <span style="background-color: white">          }</span><br>      344-&gt;N:  <span style="background-color: white">      </span><br>      345-&gt;N:  <span style="background-color: white">          /**</span><br>      346-&gt;N:  <span style="background-color: white">           * Get the required attribute value</span><br>      347-&gt;N:  <span style="background-color: white">           *</span><br>      348-&gt;N:  <span style="background-color: white">           * @param attributes    {@link Map the annotation attributes} or {@link AnnotationAttributes}</span><br>      349-&gt;N:  <span style="background-color: white">           * @param attributeName the name of attribute</span><br>      350-&gt;N:  <span style="background-color: white">           * @param 
       <t>
                   the type of attribute value
       </t></span><br>      351-&gt;N:  <span style="background-color: white">           * @return the attribute value if found</span><br>      352-&gt;N:  <span style="background-color: white">           * @throws IllegalStateException if attribute value can't be found</span><br>      353-&gt;N:  <span style="background-color: white">           * @since 1.0.6</span><br>      354-&gt;N:  <span style="background-color: white">           */</span><br>    355-&gt;331:  <span style="background-color: white">   4      public static 
       <t>
         T getRequiredAttribute(Map
        <string, object>
          attributes, String attributeName) {
        </string,>
       </t></span><br>    356-&gt;332:  <span style="background-color: white">   4          return getAttribute(attributes, attributeName, true);</span><br>      357-&gt;N:  <span style="background-color: white">          }</span><br>      358-&gt;N:  <span style="background-color: white">      </span><br>      359-&gt;N:  <span style="background-color: white">          /**</span><br>      360-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>      361-&gt;N:  <span style="background-color: white">           *</span><br>      362-&gt;N:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>      363-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      364-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      365-&gt;N:  <span style="background-color: white">           * @return non-null</span><br>      366-&gt;N:  <span style="background-color: white">           * @see #getAnnotationAttributes(Annotation, PropertyResolver, boolean, String...)</span><br>      367-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      368-&gt;N:  <span style="background-color: white">           */</span><br>    369-&gt;345:  <span style="background-color: white">   2      public static AnnotationAttributes getAnnotationAttributes(Annotation annotation, boolean ignoreDefaultValue,</span><br>    370-&gt;346:  <span style="background-color: white">                                                                     String... ignoreAttributeNames) {</span><br>    371-&gt;347:  <span style="background-color: white">   2          return getAnnotationAttributes(annotation, null, ignoreDefaultValue, ignoreAttributeNames);</span><br>      372-&gt;N:  <span style="background-color: white">          }</span><br>      373-&gt;N:  <span style="background-color: white">      </span><br>      374-&gt;N:  <span style="background-color: white">          /**</span><br>      375-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>      376-&gt;N:  <span style="background-color: white">           *</span><br>      377-&gt;N:  <span style="background-color: white">           * @param annotation             specified {@link Annotation}</span><br>      378-&gt;N:  <span style="background-color: white">           * @param propertyResolver       {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      379-&gt;N:  <span style="background-color: white">           * @param classValuesAsString    whether to turn Class references into Strings (for</span><br>      380-&gt;N:  <span style="background-color: white">           *                               compatibility with {@link org.springframework.core.type.AnnotationMetadata} or to</span><br>      381-&gt;N:  <span style="background-color: white">           *                               preserve them as Class references</span><br>      382-&gt;N:  <span style="background-color: white">           * @param nestedAnnotationsAsMap whether to turn nested Annotation instances into</span><br>      383-&gt;N:  <span style="background-color: white">           *                               {@link AnnotationAttributes} maps (for compatibility with</span><br>      384-&gt;N:  <span style="background-color: white">           *                               {@link org.springframework.core.type.AnnotationMetadata} or to preserve them as</span><br>      385-&gt;N:  <span style="background-color: white">           *                               Annotation instances</span><br>      386-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames   the attribute names of annotation should be ignored</span><br>      387-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue     whether ignore default value or not</span><br>      388-&gt;N:  <span style="background-color: white">           * @return non-null</span><br>      389-&gt;N:  <span style="background-color: white">           * @see #getAttributes(Annotation, PropertyResolver, boolean, String...)</span><br>      390-&gt;N:  <span style="background-color: white">           * @see #getAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, String...)</span><br>      391-&gt;N:  <span style="background-color: white">           * @since 1.0.11</span><br>      392-&gt;N:  <span style="background-color: white">           */</span><br>    393-&gt;362:  <span style="background-color: white">  15      public static AnnotationAttributes getAnnotationAttributes(Annotation annotation,</span><br>    394-&gt;362:  <span style="background-color: red">                                                                     PropertyResolver propertyResolver,</span><br>      395-&gt;U:  <span style="background-color: yellow">                                                                     boolean classValuesAsString,</span><br>      396-&gt;U:  <span style="background-color: yellow">                                                                     boolean nestedAnnotationsAsMap,</span><br>      397-&gt;U:  <span style="background-color: yellow">                                                                     boolean ignoreDefaultValue,</span><br>      398-&gt;U:  <span style="background-color: yellow">                                                                     String... ignoreAttributeNames) {</span><br>      399-&gt;U:  <span style="background-color: yellow">  15          return fromMap(getAttributes(annotation, propertyResolver, classValuesAsString, nestedAnnotationsAsMap,</span><br>    400-&gt;364:  <span style="background-color: red">                      ignoreDefaultValue, ignoreAttributeNames));</span><br>      401-&gt;N:  <span style="background-color: white">          }</span><br>      402-&gt;N:  <span style="background-color: white">      </span><br>      403-&gt;N:  <span style="background-color: white">          /**</span><br>      404-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>      405-&gt;N:  <span style="background-color: white">           *</span><br>      406-&gt;N:  <span style="background-color: white">           * @param annotation           specified {@link Annotation}</span><br>      407-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      408-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      409-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      410-&gt;N:  <span style="background-color: white">           * @return non-null</span><br>      411-&gt;N:  <span style="background-color: white">           * @see #getAttributes(Annotation, PropertyResolver, boolean, String...)</span><br>      412-&gt;N:  <span style="background-color: white">           * @see #getAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, String...)</span><br>      413-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      414-&gt;N:  <span style="background-color: white">           */</span><br>      415-&gt;U:  <span style="background-color: yellow">   6      public static AnnotationAttributes getAnnotationAttributes(Annotation annotation, PropertyResolver propertyResolver,</span><br>      416-&gt;U:  <span style="background-color: yellow">                                                                     boolean ignoreDefaultValue, String... ignoreAttributeNames) {</span><br>      417-&gt;U:  <span style="background-color: yellow">   6          return getAnnotationAttributes(annotation, propertyResolver, false, false, ignoreDefaultValue, ignoreAttributeNames);</span><br>      418-&gt;U:  <span style="background-color: yellow">          }</span><br>      419-&gt;N:  <span style="background-color: white">      </span><br>      420-&gt;N:  <span style="background-color: white">          /**</span><br>      421-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>      422-&gt;N:  <span style="background-color: white">           *</span><br>      423-&gt;N:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>      424-&gt;N:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      425-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      426-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      427-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      428-&gt;N:  <span style="background-color: white">           * @return if <code>annotatedElement</code> can't be found in <code>annotatedElement</code>, return <code>null</code></span><br>      429-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      430-&gt;N:  <span style="background-color: white">           */</span><br>      431-&gt;U:  <span style="background-color: yellow">   2      public static AnnotationAttributes getAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>      432-&gt;U:  <span style="background-color: yellow">                                                                     Class<!--? extends Annotation--> annotationType,</span><br>      433-&gt;U:  <span style="background-color: yellow">                                                                     PropertyResolver propertyResolver,</span><br>      434-&gt;U:  <span style="background-color: yellow">                                                                     boolean ignoreDefaultValue,</span><br>      435-&gt;U:  <span style="background-color: yellow">                                                                     String... ignoreAttributeNames) {</span><br>      436-&gt;U:  <span style="background-color: yellow">   2          return getAnnotationAttributes(annotatedElement, annotationType, propertyResolver,</span><br>      437-&gt;U:  <span style="background-color: yellow">                      false, false, ignoreDefaultValue, ignoreAttributeNames);</span><br>      438-&gt;U:  <span style="background-color: yellow">          }</span><br>      439-&gt;N:  <span style="background-color: white">      </span><br>      440-&gt;N:  <span style="background-color: white">          /**</span><br>      441-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}</span><br>      442-&gt;N:  <span style="background-color: white">           *</span><br>      443-&gt;N:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>      444-&gt;N:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      445-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      446-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      447-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      448-&gt;N:  <span style="background-color: white">           * @return if <code>annotatedElement</code> can't be found in <code>annotatedElement</code>, return <code>null</code></span><br>      449-&gt;N:  <span style="background-color: white">           * @since 1.0.11</span><br>      450-&gt;N:  <span style="background-color: white">           */</span><br>    451-&gt;378:  <span style="background-color: white"> 99+      public static AnnotationAttributes getAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>    452-&gt;379:  <span style="background-color: white">                                                                     Class<!--? extends Annotation--> annotationType,</span><br>    453-&gt;380:  <span style="background-color: white">                                                                     PropertyResolver propertyResolver,</span><br>      454-&gt;U:  <span style="background-color: yellow">                                                                     boolean classValuesAsString,</span><br>      455-&gt;U:  <span style="background-color: yellow">                                                                     boolean nestedAnnotationsAsMap,</span><br>    456-&gt;381:  <span style="background-color: white">                                                                     boolean ignoreDefaultValue,</span><br>    457-&gt;382:  <span style="background-color: white">                                                                     String... ignoreAttributeNames) {</span><br>    458-&gt;383:  <span style="background-color: white"> 99+          Annotation annotation = annotatedElement.getAnnotation(annotationType);</span><br>      459-&gt;U:  <span style="background-color: yellow"> 99+          return annotation == null ? null : getAnnotationAttributes(annotation, propertyResolver,</span><br>      460-&gt;U:  <span style="background-color: yellow">                      classValuesAsString, nestedAnnotationsAsMap, ignoreDefaultValue, ignoreAttributeNames);</span><br>      461-&gt;N:  <span style="background-color: white">          }</span><br>      462-&gt;N:  <span style="background-color: white">      </span><br>      463-&gt;N:  <span style="background-color: white">          /**</span><br>      464-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}, if the argument <code>tryMergedAnnotation</code> is <code>true</code>,</span><br>      465-&gt;N:  <span style="background-color: white">           * the {@link AnnotationAttributes} will be got from</span><br>      466-&gt;N:  <span style="background-color: white">           * {@link #tryGetMergedAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, String...) merged annotation} first,</span><br>      467-&gt;N:  <span style="background-color: white">           * if failed, and then to get from</span><br>      468-&gt;N:  <span style="background-color: white">           * {@link #getAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, boolean, String...) normal one}</span><br>      469-&gt;N:  <span style="background-color: white">           *</span><br>      470-&gt;N:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>      471-&gt;N:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      472-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      473-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      474-&gt;N:  <span style="background-color: white">           * @param tryMergedAnnotation  whether try merged annotation or not</span><br>      475-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      476-&gt;N:  <span style="background-color: white">           * @return if <code>annotatedElement</code> can't be found in <code>annotatedElement</code>, return <code>null</code></span><br>      477-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      478-&gt;N:  <span style="background-color: white">           */</span><br>      479-&gt;U:  <span style="background-color: yellow">   3      public static AnnotationAttributes getAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>      480-&gt;U:  <span style="background-color: yellow">                                                                     Class<!--? extends Annotation--> annotationType,</span><br>      481-&gt;U:  <span style="background-color: yellow">                                                                     PropertyResolver propertyResolver,</span><br>      482-&gt;U:  <span style="background-color: yellow">                                                                     boolean ignoreDefaultValue,</span><br>      483-&gt;U:  <span style="background-color: yellow">                                                                     boolean tryMergedAnnotation,</span><br>      484-&gt;U:  <span style="background-color: yellow">                                                                     String... ignoreAttributeNames) {</span><br>      485-&gt;U:  <span style="background-color: yellow">   3          return getAnnotationAttributes(annotatedElement, annotationType, propertyResolver,</span><br>      486-&gt;U:  <span style="background-color: yellow">                      false, false, ignoreDefaultValue, tryMergedAnnotation, ignoreAttributeNames);</span><br>      487-&gt;U:  <span style="background-color: yellow">          }</span><br>      488-&gt;N:  <span style="background-color: white">      </span><br>      489-&gt;N:  <span style="background-color: white">          /**</span><br>      490-&gt;N:  <span style="background-color: white">           * Get the {@link AnnotationAttributes}, if the argument <code>tryMergedAnnotation</code> is <code>true</code>,</span><br>      491-&gt;N:  <span style="background-color: white">           * the {@link AnnotationAttributes} will be got from</span><br>      492-&gt;N:  <span style="background-color: white">           * {@link #tryGetMergedAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, String...) merged annotation} first,</span><br>      493-&gt;N:  <span style="background-color: white">           * if failed, and then to get from</span><br>      494-&gt;N:  <span style="background-color: white">           * {@link #getAnnotationAttributes(AnnotatedElement, Class, PropertyResolver, boolean, boolean, String...) normal one}</span><br>      495-&gt;N:  <span style="background-color: white">           *</span><br>      496-&gt;N:  <span style="background-color: white">           * @param annotatedElement       {@link AnnotatedElement the annotated element}</span><br>      497-&gt;N:  <span style="background-color: white">           * @param annotationType         the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      498-&gt;N:  <span style="background-color: white">           * @param propertyResolver       {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      499-&gt;N:  <span style="background-color: white">           * @param classValuesAsString    whether to turn Class references into Strings (for</span><br>      500-&gt;N:  <span style="background-color: white">           *                               compatibility with {@link org.springframework.core.type.AnnotationMetadata} or to</span><br>      501-&gt;N:  <span style="background-color: white">           *                               preserve them as Class references</span><br>      502-&gt;N:  <span style="background-color: white">           * @param nestedAnnotationsAsMap whether to turn nested Annotation instances into</span><br>      503-&gt;N:  <span style="background-color: white">           *                               {@link AnnotationAttributes} maps (for compatibility with</span><br>      504-&gt;N:  <span style="background-color: white">           *                               {@link org.springframework.core.type.AnnotationMetadata} or to preserve them as</span><br>      505-&gt;N:  <span style="background-color: white">           *                               Annotation instances</span><br>      506-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue     whether ignore default value or not</span><br>      507-&gt;N:  <span style="background-color: white">           * @param tryMergedAnnotation    whether try merged annotation or not</span><br>      508-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames   the attribute names of annotation should be ignored</span><br>      509-&gt;N:  <span style="background-color: white">           * @return if <code>annotatedElement</code> can't be found in <code>annotatedElement</code>, return <code>null</code></span><br>      510-&gt;N:  <span style="background-color: white">           * @since 1.0.11</span><br>      511-&gt;N:  <span style="background-color: white">           */</span><br>    512-&gt;403:  <span style="background-color: white"> 99+      public static AnnotationAttributes getAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>    513-&gt;404:  <span style="background-color: white">                                                                     Class<!--? extends Annotation--> annotationType,</span><br>    514-&gt;405:  <span style="background-color: white">                                                                     PropertyResolver propertyResolver,</span><br>      515-&gt;U:  <span style="background-color: yellow">                                                                     boolean classValuesAsString,</span><br>      516-&gt;U:  <span style="background-color: yellow">                                                                     boolean nestedAnnotationsAsMap,</span><br>    517-&gt;406:  <span style="background-color: white">                                                                     boolean ignoreDefaultValue,</span><br>    518-&gt;407:  <span style="background-color: white">                                                                     boolean tryMergedAnnotation,</span><br>    519-&gt;408:  <span style="background-color: white">                                                                     String... ignoreAttributeNames) {</span><br>      520-&gt;N:  <span style="background-color: white">      </span><br>    521-&gt;409:  <span style="background-color: white"> 99+          AnnotationAttributes attributes = null;</span><br>      522-&gt;N:  <span style="background-color: white">      </span><br>    523-&gt;411:  <span style="background-color: white"> 99+          if (tryMergedAnnotation) {</span><br>    524-&gt;412:  <span style="background-color: white"> 99+              attributes = tryGetMergedAnnotationAttributes(annotatedElement, annotationType, propertyResolver,</span><br>      525-&gt;U:  <span style="background-color: yellow">                          classValuesAsString, nestedAnnotationsAsMap, ignoreDefaultValue, ignoreAttributeNames);</span><br>      526-&gt;N:  <span style="background-color: white">              }</span><br>      527-&gt;N:  <span style="background-color: white">      </span><br>    528-&gt;415:  <span style="background-color: white"> 99+          if (attributes == null) {</span><br>    529-&gt;416:  <span style="background-color: white"> 99+              attributes = getAnnotationAttributes(annotatedElement, annotationType, propertyResolver,</span><br>      530-&gt;U:  <span style="background-color: yellow">                          classValuesAsString, nestedAnnotationsAsMap, ignoreDefaultValue, ignoreAttributeNames);</span><br>      531-&gt;N:  <span style="background-color: white">              }</span><br>      532-&gt;N:  <span style="background-color: white">      </span><br>    533-&gt;419:  <span style="background-color: white"> 99+          return attributes;</span><br>      534-&gt;N:  <span style="background-color: white">          }</span><br>      535-&gt;N:  <span style="background-color: white">      </span><br>      536-&gt;N:  <span style="background-color: white">          /**</span><br>      537-&gt;N:  <span style="background-color: white">           * Try to get the merged {@link Annotation annotation}</span><br>      538-&gt;N:  <span style="background-color: white">           *</span><br>      539-&gt;N:  <span style="background-color: white">           * @param annotatedElement {@link AnnotatedElement the annotated element}</span><br>      540-&gt;N:  <span style="background-color: white">           * @param annotationType   the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      541-&gt;N:  <span style="background-color: white">           * @return If current version of Spring Framework is below 4.2, return <code>null</code></span><br>      542-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      543-&gt;N:  <span style="background-color: white">           */</span><br>      544-&gt;U:  <span style="background-color: yellow">   1      public static Annotation tryGetMergedAnnotation(AnnotatedElement annotatedElement,</span><br>      545-&gt;U:  <span style="background-color: yellow">                                                          Class<!--? extends Annotation--> annotationType) {</span><br>      546-&gt;U:  <span style="background-color: yellow">   1          return tryGetMergedAnnotation(annotatedElement, annotationType, false, false);</span><br>      547-&gt;U:  <span style="background-color: yellow">          }</span><br>      548-&gt;N:  <span style="background-color: white">      </span><br>      549-&gt;N:  <span style="background-color: white">          /**</span><br>      550-&gt;N:  <span style="background-color: white">           * Try to get the merged {@link Annotation annotation}</span><br>      551-&gt;N:  <span style="background-color: white">           *</span><br>      552-&gt;N:  <span style="background-color: white">           * @param annotatedElement       {@link AnnotatedElement the annotated element}</span><br>      553-&gt;N:  <span style="background-color: white">           * @param annotationType         the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      554-&gt;N:  <span style="background-color: white">           * @param classValuesAsString    whether to turn Class references into Strings (for</span><br>      555-&gt;N:  <span style="background-color: white">           *                               compatibility with {@link org.springframework.core.type.AnnotationMetadata} or to</span><br>      556-&gt;N:  <span style="background-color: white">           *                               preserve them as Class references</span><br>      557-&gt;N:  <span style="background-color: white">           * @param nestedAnnotationsAsMap whether to turn nested Annotation instances into</span><br>      558-&gt;N:  <span style="background-color: white">           *                               {@link AnnotationAttributes} maps (for compatibility with</span><br>      559-&gt;N:  <span style="background-color: white">           *                               {@link org.springframework.core.type.AnnotationMetadata} or to preserve them as</span><br>      560-&gt;N:  <span style="background-color: white">           *                               Annotation instances</span><br>      561-&gt;N:  <span style="background-color: white">           * @return If current version of Spring Framework is below 4.2, return <code>null</code></span><br>      562-&gt;N:  <span style="background-color: white">           * @since 1.0.11</span><br>      563-&gt;N:  <span style="background-color: white">           */</span><br>    564-&gt;430:  <span style="background-color: white"> 99+      public static Annotation tryGetMergedAnnotation(AnnotatedElement annotatedElement,</span><br>    565-&gt;431:  <span style="background-color: white">                                                          Class<!--? extends Annotation--> annotationType,</span><br>      566-&gt;U:  <span style="background-color: yellow">                                                          boolean classValuesAsString,</span><br>      567-&gt;U:  <span style="background-color: yellow">                                                          boolean nestedAnnotationsAsMap) {</span><br>      568-&gt;N:  <span style="background-color: white">      </span><br>    569-&gt;433:  <span style="background-color: white"> 99+          Annotation mergedAnnotation = null;</span><br>      570-&gt;N:  <span style="background-color: white">      </span><br>    571-&gt;435:  <span style="background-color: white"> 99+          ClassLoader classLoader = annotationType.getClassLoader();</span><br>      572-&gt;N:  <span style="background-color: white">      </span><br>    573-&gt;437:  <span style="background-color: white"> 99+          if (ClassUtils.isPresent(ANNOTATED_ELEMENT_UTILS_CLASS_NAME, classLoader)) {</span><br>    574-&gt;438:  <span style="background-color: white">   0              Class<!--?--> annotatedElementUtilsClass = resolveClassName(ANNOTATED_ELEMENT_UTILS_CLASS_NAME, classLoader);</span><br>      575-&gt;N:  <span style="background-color: white">                  // getMergedAnnotation method appears in the Spring Framework 4.2</span><br>    576-&gt;440:  <span style="background-color: white">   0              Method getMergedAnnotationMethod = findMethod(annotatedElementUtilsClass, "getMergedAnnotation",</span><br>      577-&gt;U:  <span style="background-color: yellow">                          AnnotatedElement.class, Class.class, boolean.class, boolean.class);</span><br>    578-&gt;441:  <span style="background-color: white">   0              if (getMergedAnnotationMethod != null) {</span><br>    579-&gt;442:  <span style="background-color: white">   0                  mergedAnnotation = (Annotation) invokeMethod(getMergedAnnotationMethod, null,</span><br>      580-&gt;U:  <span style="background-color: yellow">                              annotatedElement, annotationType, classValuesAsString, nestedAnnotationsAsMap);</span><br>      581-&gt;N:  <span style="background-color: white">                  }</span><br>      582-&gt;N:  <span style="background-color: white">              }</span><br>      583-&gt;N:  <span style="background-color: white">      </span><br>    584-&gt;446:  <span style="background-color: white"> 99+          return mergedAnnotation;</span><br>      585-&gt;N:  <span style="background-color: white">          }</span><br>      586-&gt;N:  <span style="background-color: white">      </span><br>      587-&gt;N:  <span style="background-color: white">          /**</span><br>      588-&gt;N:  <span style="background-color: white">           * Try to get {@link AnnotationAttributes the annotation attributes} after merging and resolving the placeholders</span><br>      589-&gt;N:  <span style="background-color: white">           *</span><br>      590-&gt;N:  <span style="background-color: white">           * @param annotatedElement     {@link AnnotatedElement the annotated element}</span><br>      591-&gt;N:  <span style="background-color: white">           * @param annotationType       the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      592-&gt;N:  <span style="background-color: white">           * @param propertyResolver     {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      593-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue   whether ignore default value or not</span><br>      594-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames the attribute names of annotation should be ignored</span><br>      595-&gt;N:  <span style="background-color: white">           * @return If the specified annotation type is not found, return <code>null</code></span><br>      596-&gt;N:  <span style="background-color: white">           * @since 1.0.3</span><br>      597-&gt;N:  <span style="background-color: white">           */</span><br>      598-&gt;U:  <span style="background-color: yellow">   0      public static AnnotationAttributes tryGetMergedAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>      599-&gt;U:  <span style="background-color: yellow">                                                                              Class<!--? extends Annotation--> annotationType,</span><br>      600-&gt;U:  <span style="background-color: yellow">                                                                              PropertyResolver propertyResolver,</span><br>      601-&gt;U:  <span style="background-color: yellow">                                                                              boolean ignoreDefaultValue,</span><br>      602-&gt;U:  <span style="background-color: yellow">                                                                              String... ignoreAttributeNames) {</span><br>      603-&gt;U:  <span style="background-color: yellow">   0          return tryGetMergedAnnotationAttributes(annotatedElement, annotationType, propertyResolver,</span><br>      604-&gt;U:  <span style="background-color: yellow">                      false, false, ignoreDefaultValue, ignoreAttributeNames);</span><br>      605-&gt;U:  <span style="background-color: yellow">          }</span><br>      606-&gt;N:  <span style="background-color: white">      </span><br>      607-&gt;N:  <span style="background-color: white">          /**</span><br>      608-&gt;N:  <span style="background-color: white">           * Try to get {@link AnnotationAttributes the annotation attributes} after merging and resolving the placeholders</span><br>      609-&gt;N:  <span style="background-color: white">           *</span><br>      610-&gt;N:  <span style="background-color: white">           * @param annotatedElement       {@link AnnotatedElement the annotated element}</span><br>      611-&gt;N:  <span style="background-color: white">           * @param annotationType         the {@link Class tyoe} pf {@link Annotation annotation}</span><br>      612-&gt;N:  <span style="background-color: white">           * @param propertyResolver       {@link PropertyResolver} instance, e.g {@link Environment}</span><br>      613-&gt;N:  <span style="background-color: white">           * @param classValuesAsString    whether to turn Class references into Strings (for</span><br>      614-&gt;N:  <span style="background-color: white">           *                               compatibility with {@link org.springframework.core.type.AnnotationMetadata} or to</span><br>      615-&gt;N:  <span style="background-color: white">           *                               preserve them as Class references</span><br>      616-&gt;N:  <span style="background-color: white">           * @param nestedAnnotationsAsMap whether to turn nested Annotation instances into</span><br>      617-&gt;N:  <span style="background-color: white">           *                               {@link AnnotationAttributes} maps (for compatibility with</span><br>      618-&gt;N:  <span style="background-color: white">           *                               {@link org.springframework.core.type.AnnotationMetadata} or to preserve them as</span><br>      619-&gt;N:  <span style="background-color: white">           *                               Annotation instances</span><br>      620-&gt;N:  <span style="background-color: white">           * @param ignoreDefaultValue     whether ignore default value or not</span><br>      621-&gt;N:  <span style="background-color: white">           * @param ignoreAttributeNames   the attribute names of annotation should be ignored</span><br>      622-&gt;N:  <span style="background-color: white">           * @return If the specified annotation type is not found, return <code>null</code></span><br>      623-&gt;N:  <span style="background-color: white">           * @since 1.0.11</span><br>      624-&gt;N:  <span style="background-color: white">           */</span><br>      625-&gt;U:  <span style="background-color: yellow"> 99+      public static AnnotationAttributes tryGetMergedAnnotationAttributes(AnnotatedElement annotatedElement,</span><br>      626-&gt;U:  <span style="background-color: yellow">                                                                              Class<!--? extends Annotation--> annotationType,</span><br>      627-&gt;U:  <span style="background-color: yellow">                                                                              PropertyResolver propertyResolver,</span><br>      628-&gt;U:  <span style="background-color: yellow">                                                                              boolean classValuesAsString,</span><br>      629-&gt;U:  <span style="background-color: yellow">                                                                              boolean nestedAnnotationsAsMap,</span><br>      630-&gt;U:  <span style="background-color: yellow">                                                                              boolean ignoreDefaultValue,</span><br>      631-&gt;U:  <span style="background-color: yellow">                                                                              String... ignoreAttributeNames) {</span><br>      632-&gt;U:  <span style="background-color: yellow"> 99+          Annotation annotation = tryGetMergedAnnotation(annotatedElement, annotationType, classValuesAsString, nestedAnnotationsAsMap);</span><br>      633-&gt;U:  <span style="background-color: yellow"> 99+          return annotation == null ? null : getAnnotationAttributes(annotation, propertyResolver,</span><br>      634-&gt;U:  <span style="background-color: yellow">                      classValuesAsString, nestedAnnotationsAsMap, ignoreDefaultValue, ignoreAttributeNames);</span><br>      635-&gt;N:  <span style="background-color: white">          }</span><br>      636-&gt;N:  <span style="background-color: white">      </span><br>      637-&gt;N:  <span style="background-color: white">      }</span><br></pre> </code> 
   </div> 
  </div>  
 </body>
</html>